
# 2021-02-11 14:09:49.366864
+\c engine_dev

# 2021-02-11 14:09:51.762512
+\l

# 2021-02-11 14:10:02.382424
+\d

# 2021-02-11 14:10:09.933091
+select * from listings;

# 2021-02-12 08:33:39.155048
+\q

# 2021-02-12 09:38:33.503075
+\d

# 2021-02-12 09:38:39.016151
+\c engine_dev

# 2021-02-12 09:38:39.926037
+\d

# 2021-02-12 09:39:00.323791
+\d dealer_product_features

# 2021-02-12 11:53:17.477554
+\d listings

# 2021-02-15 07:38:02.107322
+select * FROM listings;

# 2021-02-15 07:41:06.424836
+\x

# 2021-02-15 07:41:07.562282
+select * FROM listings;

# 2021-02-15 08:42:57.352327
+\q

# 2021-02-15 13:40:59.005016
+/c listings

# 2021-02-15 13:41:03.795002
+\c engine_dev

# 2021-02-15 13:41:07.012748
+select * from listings;

# 2021-02-15 13:41:25.700897
+\x select * from listings limit 1;

# 2021-02-15 13:41:31.336266
+select * from listings limit 1;

# 2021-02-15 13:47:11.588798
+exit

# 2021-02-15 14:40:39.926313
+\c engine_dev

# 2021-02-15 14:40:47.798896
+select * from inventory_dealer_overrides;

# 2021-02-15 14:40:51.591899
+select * from inventory_displays;

# 2021-02-15 14:40:54.831490
+\x

# 2021-02-15 14:40:58.028159
+select * from inventory_displays limit 1

# 2021-02-15 14:41:35.729150
+\d

# 2021-02-15 14:41:37.433980
+\x

# 2021-02-15 14:41:38.091335
+\d

# 2021-02-15 14:41:49.438748
+select * from inventory_source_data limit 1;

# 2021-02-15 14:41:51.007591
+\x

# 2021-02-15 14:41:52.015263
+select * from inventory_source_data limit 1;

# 2021-02-17 15:46:05.087681
+\d zip_codes

# 2021-02-17 15:46:16.058773
+\d listings

# 2021-02-18 11:32:35.577356
+select * from states;

# 2021-02-18 11:33:01.472349
+select * from zip_codes inner join states on states.id = zip_codes.state_id;

# 2021-02-18 11:33:06.677998
+select count(*) from zip_codes inner join states on states.id = zip_codes.state_id;

# 2021-02-18 11:33:16.130941
+select count(*) from zip_codes;

# 2021-02-18 11:34:30.092278
+select count(*) from zip_codes left join states on states.id = zip_codes.state_id;

# 2021-02-18 11:54:21.176993
+select * from states;

# 2021-02-18 11:54:35.980369
+select * from listings;

# 2021-02-18 11:54:45.870413
+select * from geography_columns

# 2021-02-18 11:54:47.589968
+select * from geography_columns/

# 2021-02-18 11:54:49.378700
+select * from geography_columns;

# 2021-02-18 11:54:54.871786
+\d geography_columns

# 2021-02-18 11:55:03.646479
+\d geo_ingestions

# 2021-02-18 12:36:05.615981
+select count(*) from states;

# 2021-02-18 12:36:23.471451
+select states.abbreviation from states;

# 2021-02-22 13:24:24.850255
+use engine_dev

# 2021-02-22 13:24:28.776159
+select * from listings;

# 2021-02-22 13:24:38.317430
+\x

# 2021-02-22 13:24:39.858079
+select * from listings;

# 2021-02-22 13:25:06.228330
+select * from listings where id like = "cec04ba%"

# 2021-02-22 13:25:09.479315
+select * from listings where id like = "cec05ba%"

# 2021-02-22 13:25:14.430434
+select * from listings where id like "cec05ba%"

# 2021-02-22 13:25:20.864346
+select * from listings where id like 'cec05ba%'

# 2021-02-22 13:25:28.211929
+select * from listings;

# 2021-02-22 13:26:16.080623
+update listings set price_badge = 'GOOD' where id = uuid('cec045ba-cc4c-4e4f-8f2b-2caed6402fde')

# 2021-02-22 13:26:36.038492
+select * from listings;

# 2021-02-22 13:27:26.641950
+exit

# 2021-02-22 13:31:46.848925
+select * from listings;

# 2021-02-22 13:31:47.961726
+\x

# 2021-02-22 13:31:51.438330
+use engine_dev;

# 2021-02-22 13:31:53.271512
+select * from listings;

# 2021-02-22 13:32:22.927402
+update listings set price_badge = 'GOOD' where id = uuid('edfe4e1d-8af2-436d-b8bb-78849c5c3b2e')

# 2021-02-25 09:44:26.554146
+\c engine_dev

# 2021-02-25 09:44:29.276903
+UPDATE "public"."inventory_displays" SET "image_urls"='{
+https://beta.cstatic-images.com/in/v2/seeds/8ed8d9618fbb45989ebbeecdd616406b.jpg,
+https://beta.cstatic-images.com/in/v2/9bc79700-a19c-597d-8495-1f3dd5511e4b/65e566fc-7caa-4bf7-b6ec-7046fd641693/Vt93jW1cacdxXMZXCjO2C_3JRGM.jpg,
+https://beta.cstatic-images.com/in/v2/ee4e80a4-6285-5841-aeab-fd6bab19d81f/6cbf4e5b-9564-4c74-8a41-0f3eabe3244a/6LHku4Su1ZYHqHcj78yPZ_39aDg.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/ee4e80a4-6285-5841-aeab-fd6bab19d81f/6cbf4e5b-9564-4c74-8a41-0f3eabe3244a/6LHku4Su1ZYHqHcj78yPZ_39aDg.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/ee4e80a4-6285-5841-aeab-fd6bab19d81f/6cbf4e5b-9564-4c74-8a41-0f3eabe3244a/6LHku4Su1ZYHqHcj78yPZ_39aDg.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg,
+https://beta.cstatic-images.com/in/v2/seeds/fc6ceaa05cb843518bd7c0bdff0caf96.jpg}' WHERE "list_price"='17991';
+

# 2021-03-01 16:13:41.466029
+select * from listings where id = uuid('cec045ba-cc4c-4e4f-8f2b-2caed6402fde')

# 2021-03-01 23:37:56.683779
+\d listings;

# 2021-03-04 11:10:39.086254
+\d dealer_product_features

# 2021-03-04 11:11:38.962615
+\d features

# 2021-03-04 11:12:24.659483
+select * from dealer_product_features

# 2021-03-04 14:42:18.996259
+select dpf.dealer_config from dealer_product_featuresas dpf

# 2021-03-04 14:42:33.925741
+select dpf.feature_config from dealer_product_featuresas dpf

# 2021-03-04 14:42:37.380635
+select dpf.feature_config from dealer_product_features as dpf

# 2021-03-04 14:42:47.366969
+select dpf.feature_config -> make_zone from dealer_product_features as dpf

# 2021-03-04 14:43:03.094887
+select dpf.feature_config -> 'make_zone' from dealer_product_features as dpf

# 2021-03-04 14:43:09.126373
+select dpf.feature_config -> 'make_zones' from dealer_product_features as dpf

# 2021-03-04 14:43:26.113912
+select dpf.feature_config -> 'make_zones' -> [0] -> 'vehicle_make_id' from dealer_product_features as dpf

# 2021-03-04 14:43:32.526453
+select dpf.feature_config -> 'make_zones' -> 0 -> 'vehicle_make_id' from dealer_product_features as dpf

# 2021-03-04 15:03:03.983388
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (p2."code" IN ('HYPERDRIVE','PREMIER')) AND (z6."zip_code" = '606060') AND (p2."stock_type" = 'used') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-04 15:03:11.396328
+explain SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (p2."code" IN ('HYPERDRIVE','PREMIER')) AND (z6."zip_code" = '606060') AND (p2."stock_type" = 'used') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-04 15:03:36.280108
+\d dealer_product_features

# 2021-03-08 11:13:27.205007
+\d

# 2021-03-08 11:13:39.345983
+select * from schema_migrations;

# 2021-03-08 11:19:11.967996
+delete from schema_migrations where version = '20210304224108'

# 2021-03-08 11:36:36.929450
+\d dealer_product_features

# 2021-03-08 11:38:21.824793
+delete from schema_migrations where version = '20210304224108'

# 2021-03-08 12:11:59.558982
+\d dealer_product_features

# 2021-03-08 12:17:00.013464
+drop index dealer_product_features_upper_feature_config___make_zones___0__

# 2021-03-08 12:17:52.405843
+delete from schema_migrations where version = '20210304224108'

# 2021-03-08 12:22:21.126629
+\d dealer_product_features

# 2021-03-08 12:22:28.438287
+explain SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (p2."code" IN ('HYPERDRIVE','PREMIER')) AND (z6."zip_code" = '606060') AND (p2."stock_type" = 'used') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-09 10:14:21.125881
+\d

# 2021-03-09 10:15:44.828500
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-09 10:15:50.462114
+EXPLAIN SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-09 10:25:33.954437
+\q

# 2021-03-09 12:14:34.859523
+\d dealer_product_features

# 2021-03-09 12:14:39.990153
+\c engine_dev

# 2021-03-09 12:14:41.061005
+\d dealer_product_features

# 2021-03-09 12:47:45.837714
+drop index dealer_product_features_vehicle_make_id

# 2021-03-09 12:48:44.559881
+\d dealer_product_features

# 2021-03-09 12:49:57.675683
+CREATE INDEX CONCURRENTLY dealer_product_features_vehicle_make_id ON dealer_product_features USING BTREE (upper(feature_config->'make_zones'->0->>'vehicle_make_id'))

# 2021-03-09 12:50:02.141172
+drop index dealer_product_features_vehicle_make_id

# 2021-03-09 12:50:04.887627
+CREATE INDEX CONCURRENTLY dealer_product_features_vehicle_make_id ON dealer_product_features USING BTREE (upper(feature_config->'make_zones'->0->>'vehicle_make_id'))

# 2021-03-09 12:51:06.482026
+CREATE INDEX CONCURRENTLY dealer_product_features_vehicle_make_description ON dealer_product_features USING BTREE (upper(feature_config->'make_zones'->0->>'vehicle_make_description'))

# 2021-03-09 12:51:11.431365
+\d dealer_product_features

# 2021-03-09 12:52:27.054783
+drop index dealer_product_features_vehicle_make_id

# 2021-03-09 12:52:36.393112
+drop index dealer_product_features_vehicle_make_description

# 2021-03-09 12:53:23.620625
+drop index dealer_product_features_vehicle_make_id

# 2021-03-09 12:53:27.311394
+\d dealer_product_features

# 2021-03-09 13:06:53.568218
+\d

# 2021-03-09 13:06:56.155422
+\d dealer_product_features

# 2021-03-09 13:07:11.230030
+select feature_config from dealer_product_features 

# 2021-03-09 13:26:54.794283
+\d dealer_product_features

# 2021-03-09 13:27:05.267310
+drop index dealer_product_features_vehicle_make_id

# 2021-03-09 13:28:26.605327
+\d dealer_product_features

# 2021-03-10 07:13:18.522062
+SELECT d3."dealer_id"
+FROM "dealer_product_features" AS d0
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id"
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id"
+    INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id"
+    INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id'
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id"
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id"
+WHERE (
+        z6."zip_code" = '60606'
+        AND (p2."code" = 'HYPERDRIVE')
+        AND (
+            d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL
+        )
+        ORDER BY d3."inserted_at" DESC
+        LIMIT 1

# 2021-03-10 07:14:07.583578
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE ( z6."zip_code" = '60606' AND (p2."code" = 'HYPERDRIVE') AND ( d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:14:31.241861
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE ( z6."zip_code" = '60606' AND (p2."code" = 'HYPERDRIVE') AND ( d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL ) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:14:39.723603
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE ( z6."zip_code" = '60606' AND (p2."code" = 'HYPERDRIVE') AND ( d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL )

# 2021-03-10 07:18:03.378417
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:18:20.928457
+explain SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:19:09.301072
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:19:38.946645
+explain analyze SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:37:25.091962
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'PREMIER') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-03-10 07:39:32.102158
+exit

# 2021-03-10 12:40:49.944655
+\d dealer_product_features

# 2021-03-10 12:41:02.611424
+select feature_config from dealer_product_features limit 1;

# 2021-03-10 12:52:01.228527
+\d

# 2021-03-10 12:53:45.943155
+select * from zip_zones;

# 2021-03-10 12:53:57.002173
+select * from zips_zones;

# 2021-03-10 12:54:04.201775
+select * from zips_zones limit 100;

# 2021-03-10 12:54:29.905888
+\d zips_zones

# 2021-03-10 12:58:01.643699
+\q

# 2021-03-11 08:19:20.234564
+\c engine_dev

# 2021-03-11 08:19:24.633271
+\d listings

# 2021-03-11 08:23:17.601446
+\d inventory

# 2021-03-11 08:23:31.271198
+\d inventory_displays

# 2021-03-12 07:58:06.060613
+SELECT d3."dealer_id"
+FROM "dealer_product_features" AS d0
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id"
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id"
+    INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id"
+    INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id'
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id"
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id"
+WHERE (z6."zip_code" = '60606')
+    AND (p2."code" = 'PREMIER')
+    AND (
+        d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL
+    ) ORDER BY d3."inserted_at" DESC
+LIMIT 1

# 2021-03-12 07:58:30.505965
+explain analyze SELECT d3."dealer_id"
+FROM "dealer_product_features" AS d0
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id"
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id"
+    INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id"
+    INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id'
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id"
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id"
+WHERE (z6."zip_code" = '60606')
+    AND (p2."code" = 'PREMIER')
+    AND (
+        d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL
+    ) ORDER BY d3."inserted_at" DESC
+LIMIT 1

# 2021-03-12 08:00:48.218610
+\d zones

# 2021-03-12 08:08:04.632051
+explain analyze SELECT d3."dealer_id"
+FROM "dealer_product_features" AS d0
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id"
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id"
+    INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id"
+    INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config"->'make_zones'->0->>'zone_name_id'
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id"
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id"
+WHERE (z6."zip_code" = '60606')
+    AND (p2."code" = 'PREMIER')
+    AND (
+        d0."feature_config"->'make_zones'->0->>'vehicle_make_id' IS NULL
+    ) ORDER BY d3."inserted_at" DESC
+LIMIT 1

# 2021-03-12 08:08:21.834708
+\d dealer_product_features

# 2021-03-12 08:09:04.403299
+select * from schema_migrations where version like "20210312%"

# 2021-03-12 08:09:09.657753
+select * from schema_migrations where version like '20210312%'

# 2021-03-12 08:09:18.614728
+select * from schema_migrations where version > '20210312%'

# 2021-03-12 08:09:24.599980
+select * from schema_migrations where version > 20210312

# 2021-03-12 08:09:54.952718
+delete from schema_migrations where version = '2021031255707'

# 2021-03-12 08:10:04.547490
+delete from schema_migrations where version = '20210312155707'

# 2021-03-12 08:10:31.130368
+\d dealer_product_features

# 2021-03-12 11:42:21.003578
+select * from listings;

# 2021-03-12 11:42:24.007048
+select * from listing;

# 2021-03-12 11:42:27.370321
+\c engine_dev

# 2021-03-12 11:42:28.314195
+select * from listing;

# 2021-03-12 11:42:29.845775
+select * from listings;

# 2021-03-12 11:42:58.150239
+select * from listings where id = uuid('cec045ba-cc4c-4e4f-8f2b-2caed6402fde')

# 2021-03-12 11:43:00.918591
+\x

# 2021-03-12 11:43:02.416390
+select * from listings where id = uuid('cec045ba-cc4c-4e4f-8f2b-2caed6402fde')

# 2021-03-12 14:03:41.493447
+update listings set search_rank_1 to (select random())

# 2021-03-12 14:03:45.575852
+update listings set search_rank_1 = (select random())

# 2021-03-12 14:03:48.478091
+select * from listings where id = uuid('cec045ba-cc4c-4e4f-8f2b-2caed6402fde')

# 2021-03-12 14:03:58.200390
+select search_rank_1 from listings;

# 2021-03-12 14:04:21.564868
+update listings set search_rank_1 = (select random() from generate_series())

# 2021-03-12 14:04:34.276829
+update listings set search_rank_1 = (select random() from generate_series(1,18))

# 2021-03-12 14:06:34.484555
+update listings set search_rank_1 = rand.rank from (select random() as rank from generate_series(1,18) as rand)

# 2021-03-12 14:06:44.556200
+update listings set search_rank_1 = rand.rank from (select random() as rank from generate_series(1,18)) as rand

# 2021-03-12 14:06:47.444617
+select search_rank_1 from listings;

# 2021-03-12 14:23:44.827309
+select random() from generate_series(1,18)

# 2021-03-12 14:28:12.861647
+select random(), listing.id from listings;

# 2021-03-12 14:28:20.600035
+select random(), listings.id from listings;

# 2021-03-12 14:29:04.771076
+update listings set search_rank_1 = rand.rank from (select random() as rank, listings.id from listings) as rand where listings.id = rand.id

# 2021-03-12 14:29:08.674495
+select search_rank_1 from listings;

# 2021-03-12 14:29:25.740364
+update listings set search_rank_2 = rand.rank from (select random() as rank, listings.id from listings) as rand where listings.id = rand.id

# 2021-03-12 14:29:27.314500
+select search_rank_1 from listings;

# 2021-03-15 08:47:37.135686
+select * from dealer_product_features

# 2021-03-15 08:47:59.417441
+\d dealer_product_features

# 2021-03-15 09:25:05.032381
+\q

# 2021-03-16 08:55:31.875053
+\c engine_dev

# 2021-03-16 08:55:36.329935
+\d listings

# 2021-03-16 08:59:07.057120
+\d inventory

# 2021-03-16 12:26:02.437764
+select price_badge from listings;

# 2021-03-17 09:38:36.735396
+\q

# 2021-03-17 11:49:29.774873
+\c engine_dev

# 2021-03-17 11:49:33.792127
+select price_badge from listings;

# 2021-03-18 11:42:52.232348
+\c engine_dev

# 2021-03-18 11:42:56.155117
+select * from listings;

# 2021-03-18 11:43:22.470578
+\q

# 2021-03-23 08:25:13.618777
+select * from listings limit 1;

# 2021-03-23 08:25:14.933310
+\x

# 2021-03-23 08:25:15.866260
+select * from listings limit 1;

# 2021-03-23 08:25:39.266927
+select * from listings inner join inventory on inventory.id = listings.inventory_id limit 1;

# 2021-03-23 08:27:01.785631
+select * from makes limit 1;

# 2021-03-23 08:28:08.903345
+select * from makes where name = "Saturn";

# 2021-03-23 08:28:15.497052
+select * from makes where name = 'Saturn';

# 2021-03-23 08:29:28.565093
+select * from listings inner join inventory on inventory.id = listings.inventory_id inner join makes on makes.id = inventory.make_id where makes.name = 'Saturn' limit 1;

# 2021-03-23 08:29:47.997134
+select * from listings inner join inventory on inventory.id = listings.inventory_id inner join makes on makes.id = inventory.make_id where makes.name = 'Saturn' and inventory.used = False;

# 2021-03-23 08:30:05.961646
+select * from listings inner join inventory on inventory.id = listings.inventory_id inner join makes on makes.id = inventory.make_id where makes.name = 'Saturn' and inventory.certified_preowned = True;

# 2021-03-23 08:32:09.115436
+select count(*) from listings inner join inventory on inventory.id = listings.inventory_id inner join makes on makes.id = inventory.make_id where makes.name = 'Saturn'

# 2021-03-24 15:13:32.053402
+\d

# 2021-03-24 15:13:34.156631
+exit

# 2021-03-24 15:13:58.849285
+\d

# 2021-03-24 15:14:10.515270
+\q

# 2021-04-06 13:33:41.681771
+refresh materialized view base_trims_mv;

# 2021-04-06 13:33:46.349273
+\q

# 2021-04-06 13:34:05.688657
+refresh materialized view base_trims_mv;

# 2021-04-06 13:34:40.069270
+/c

# 2021-04-06 13:34:50.992643
+/c engine_dev

# 2021-04-06 13:34:53.310649
+\c engine_dev

# 2021-04-06 13:34:55.728931
+refresh materialized view base_trims_mv;

# 2021-04-06 13:58:40.333301
+\dt

# 2021-04-06 13:58:59.189514
+\d stock_photo_collections

# 2021-04-06 13:59:11.451035
+select * from stock_photo_collections;

# 2021-04-06 14:09:17.837654
+\d stock_photo_collections;

# 2021-04-06 14:09:38.830646
+\d chrome_engines;

# 2021-04-06 14:09:45.310707
+\d vehicle_definitions;

# 2021-04-06 14:11:30.161795
+select name from vehicle_definitions;

# 2021-04-06 14:12:01.370618
+select * from vehicle_competitors where name like "Chevrolet Impala%"

# 2021-04-06 14:12:36.503939
+select * from vehicle_definitions where name like "Chevrolet Impala%"

# 2021-04-06 14:12:43.301210
+select * from vehicle_definitions where name like 'Chevrolet Impala%'

# 2021-04-06 14:12:48.586638
+\x

# 2021-04-06 14:12:49.611297
+select * from vehicle_definitions where name like 'Chevrolet Impala%'

# 2021-04-06 14:14:02.961239
+\d

# 2021-04-06 14:14:05.303612
+\x

# 2021-04-06 14:14:05.921487
+\d

# 2021-04-06 14:14:15.483121
+select * from chrome_styles;

# 2021-04-06 14:14:21.940967
+\x

# 2021-04-06 14:14:23.223690
+select * from chrome_styles;

# 2021-04-06 14:55:43.317245
+\x

# 2021-04-06 14:55:44.194213
+select * from chrome_styles;

# 2021-04-06 14:56:36.476251
+select * from vehicle_definitions;

# 2021-04-06 14:56:49.649168
+\x

# 2021-04-06 14:56:51.379633
+select * from vehicle_definitions;

# 2021-04-06 14:57:40.454547
+select * from chrome_styles;

# 2021-04-06 14:58:20.989558
+select * from vehicle_definitions;

# 2021-04-06 15:00:25.977407
+select * from stock_photo_collections;

# 2021-04-06 15:00:40.107573
+select * from stock_photo_collections where vehicle_definition_id = '52180d33-a92a-4d66-9a49-1de67786ec59';

# 2021-04-06 15:02:58.924971
+select * from oban_jobs;

# 2021-04-06 15:03:06.708581
+delete from oban_jobs;

# 2021-04-06 15:03:31.988432
+select * from chrome_styles;

# 2021-04-06 15:03:42.969585
+select * from chrome_styles where division = 'Chevrolet'

# 2021-04-06 15:05:23.105989
+select * from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:11:19.490621
+delete from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:12:28.898730
+select * from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:20:14.239442
+delete from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:26:25.644432
+select * from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:29:23.802786
+delete from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:31:08.315815
+select * from vehicle_definitions;

# 2021-04-06 15:31:26.979801
+select * from vehicle_definitions where name like 'Chevrolet Impala%'

# 2021-04-06 15:31:38.198102
+select * from chrome_styles where division = 'Chevrolet'

# 2021-04-06 15:33:06.872077
+select * from stock_photo_collections where vehicle_definition_id = 'd88e6940-9a75-4a63-b9c4-54b3b622748e';

# 2021-04-06 15:38:24.241412
+select * from chrome_styles where division = 'Chevrolet';

# 2021-04-07 11:55:54.228083
+EXPLAIN ANALYZE SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'HYPERDRIVE') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-04-07 12:13:42.387625
+select count(*) from listings;

# 2021-04-07 12:16:14.084583
+\c engine_dev

# 2021-04-07 12:16:19.599310
+\d listings

# 2021-04-08 15:30:19.277809
+\q

# 2021-04-08 15:31:33.075931
+SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'HYPERDRIVE') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-04-08 15:31:42.264692
+EXPLAIN ANALYZE SELECT d3."dealer_id" FROM "dealer_product_features" AS d0 INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" INNER JOIN "dealer_orders" AS d3 ON d3."id" = d0."dealer_order_id" INNER JOIN "zones" AS z4 ON z4."salesforce_id" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name_id' INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" WHERE (z6."zip_code" = '60606') AND (p2."code" = 'HYPERDRIVE') AND (d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_id' IS NULL) ORDER BY d3."inserted_at" DESC LIMIT 1

# 2021-04-12 12:05:16.519565
+/c engine_dev

# 2021-04-12 12:05:18.892911
+\c engine_dev

# 2021-04-12 12:05:24.439407
+delete from oban_jobs;

# 2021-04-12 12:06:07.684701
+\q

# 2021-04-12 14:22:02.114300
+/c engine_dev

# 2021-04-12 14:22:04.307402
+\c engine_dev

# 2021-04-12 14:22:06.040027
+delete from oban_jobs;

# 2021-04-12 14:40:56.414316
+\q

# 2021-04-13 22:03:46.043297
+/c engine_dev

# 2021-04-13 22:03:48.618846
+\c engine_dev

# 2021-04-13 22:03:51.162574
+delete from oban_jobs;

# 2021-04-15 10:11:26.793404
+\q

# 2021-04-15 10:14:31.823435
+select * from certified_pre_owned_programs where name = 'Buick';

# 2021-04-15 10:14:34.027821
+\x

# 2021-04-15 10:14:35.343824
+select * from certified_pre_owned_programs where name = 'Buick';

# 2021-04-15 10:14:56.281160
+select * from certified_pre_owned_programs where name = 'Chevrolet';

# 2021-04-15 10:15:06.541068
+select * from certified_pre_owned_programs where name = 'Toyota';

# 2021-04-15 10:17:01.483891
+select * from certified_pre_owned_programs where dealer_certification_uri is null;

# 2021-04-15 10:17:26.515704
+select count(*) from certified_pre_owned_programs where dealer_certification_uri is null;

# 2021-04-15 10:17:37.045498
+select count(*) from certified_pre_owned_programs;

# 2021-04-15 10:17:50.804567
+select count(*) from certified_pre_owned_programs where dealer_certification_uri is null and dealer_certification_text is not null;

# 2021-04-15 12:43:02.825840
+\q

# 2021-04-15 12:43:18.483966
+\c engine_test

# 2021-04-15 12:43:38.453168
+\d dealers

# 2021-04-15 12:43:49.615020
+select * from dealers;

# 2021-04-15 12:43:59.222232
+select * from listings;

# 2021-04-16 09:25:06.888318
+select * from dealers;

# 2021-04-16 09:25:13.000665
+\c engine_dev

# 2021-04-16 09:25:15.802261
+select * from dealers;

# 2021-04-16 09:25:22.619514
+select * from dealers limit 1

# 2021-04-16 09:25:28.446994
+\x

# 2021-04-16 09:25:29.493124
+select * from dealers limit 1

# 2021-04-16 12:07:49.954060
+\d dealer_product_features

# 2021-04-19 16:01:44.579471
+SELECT b0."msrp"::float,
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'ford0')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp"::float)
+

# 2021-04-19 16:02:41.372422
+SELECT b0."msrp"::float,
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'ford0')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp"::float) = MIN(b0."msrp"::float")
+

# 2021-04-19 16:02:48.179209
+SELECT b0."msrp"::float,
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'ford0')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp"::float) = MIN(b0."msrp"::float)
+

# 2021-04-19 16:03:05.740435
+SELECT MIN(b0."msrp"::float),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'ford0')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp"::float) = MIN(b0."msrp"::float)
+

# 2021-04-19 16:03:18.565668
+select * from base_trims_mv;

# 2021-04-19 16:03:38.681442
+select make_slug from base_trims_mv;

# 2021-04-19 16:03:55.083786
+SELECT MIN(b0."msrp"::float),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'chrevolet')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp"::float) = MIN(b0."msrp"::float)
+

# 2021-04-19 16:08:50.224078
+\q

# 2021-04-19 16:09:53.697702
+SELECT MIN(b0."msrp"::float,)
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING b0."msrp"::float = MIN(b0."msrp"::float)

# 2021-04-19 16:09:59.265775
+SELECT MIN(b0."msrp"::float)
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING b0."msrp"::float = MIN(b0."msrp"::float)

# 2021-04-19 16:10:05.206819
+SELECT MIN(b0."msrp"::float),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING b0."msrp"::float = MIN(b0."msrp"::float)

# 2021-04-19 16:10:46.415195
+SELECT MIN(b0."msrp")
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING b0."msrp" = MIN(b0."msrp")

# 2021-04-19 16:10:55.348685
+SELECT MIN(b0."msrp"),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING b0."msrp" = MIN(b0."msrp")

# 2021-04-19 16:11:07.385922
+SELECT MIN(b0."msrp"),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'honda')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp") = MIN(b0."msrp")

# 2021-04-19 16:11:21.359742
+SELECT MIN(b0."msrp"),
+        b0."model_slug"
+FROM "base_trims_mv" AS b0
+WHERE (b0."make_slug" = 'ford')
+  AND (b0."year_name" IN ('2021',
+                          '2022',
+                          '2020'))
+GROUP BY b0."model_slug"
+HAVING MIN(b0."msrp") = MIN(b0."msrp")

# 2021-04-19 16:12:16.214434
+select * from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020');

# 2021-04-19 16:12:22.447066
+\x

# 2021-04-19 16:12:23.571861
+select * from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020');

# 2021-04-19 16:12:34.699602
+select * from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:13:20.048170
+selectmsrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:13:22.624758
+select msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:13:25.729877
+\x

# 2021-04-19 16:13:26.528461
+select msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:14:03.788982
+select distinct on(model_slug), msrp, year_name from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:14:11.371574
+select distinct on(model_slug) msrp, year_name from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:14:23.308585
+select distinct on(model_slug) msrp, year_name from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp

# 2021-04-19 16:14:35.345934
+select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp

# 2021-04-19 16:15:01.390811
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp) order by msrp

# 2021-04-19 16:15:20.560603
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp) as lowest_per_model order by msrp

# 2021-04-19 16:16:29.064374
+select min(msrp), year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp group by model_slug

# 2021-04-19 16:16:58.527765
+select min(msrp) as min_msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') group by model_slug order by min_msrp

# 2021-04-19 16:17:38.701789
+select min(msrp) as min_msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') group by model_slug,year_name order by min_msrp

# 2021-04-19 16:18:01.641034
+select min(msrp) as min_msrp, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') group by model_slug order by min_msrp

# 2021-04-19 16:18:45.449269
+first

# 2021-04-19 16:18:57.858571
+select min(msrp) as min_msrp, model_slug, first(year_name) from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') group by model_slug order by min_msrp

# 2021-04-19 16:19:11.572117
+select min(msrp) as min_msrp, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') group by model_slug order by min_msrp

# 2021-04-19 16:19:15.431337
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp) as lowest_per_model order by msrp

# 2021-04-19 16:19:47.168366
+select msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by msrp

# 2021-04-19 16:19:54.615917
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp) as lowest_per_model order by msrp

# 2021-04-19 16:20:12.796075
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name) as lowest_per_model order by msrp

# 2021-04-19 16:20:18.961833
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name DESC) as lowest_per_model order by msrp

# 2021-04-19 16:21:07.190975
+explain analyze select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name DESC) as lowest_per_model order by msrp

# 2021-04-19 16:21:34.798924
+\d base_trims_mv

# 2021-04-19 16:24:12.403135
+select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name DESC

# 2021-04-19 16:24:19.850549
+explain analyze select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name DESC

# 2021-04-19 16:24:46.041098
+select * from (select distinct on(model_slug) msrp, year_name, model_slug from base_trims_mv where "make_slug" = 'ford' and "year_name" in ('2021','2022','2020') order by model_slug, msrp, year_name DESC) as lowest_per_model order by msrp

# 2021-04-29 09:27:41.503548
+/d

# 2021-04-29 09:27:43.235484
+\d

# 2021-04-29 09:29:47.246021
+\q

# 2021-04-29 09:34:31.007191
+select * from pg_stat_activity;

# 2021-04-29 09:34:57.927224
+select application_name from pg_stat_activity

# 2021-04-29 09:35:07.119063
+select pid,application_name from pg_stat_activity

# 2021-04-29 09:35:18.041599
+select pid,application_name from pg_stat_activity where pid = 3127

# 2021-04-29 09:35:24.477762
+select * from pg_stat_activity where pid = 3127

# 2021-04-29 09:35:34.804525
+select * from pg_stat_activity where pid = 30196

# 2021-04-29 09:35:35.952655
+\x

# 2021-04-29 09:35:37.178765
+select * from pg_stat_activity where pid = 30196

# 2021-04-29 09:37:33.133052
+\q

# 2021-04-29 09:39:41.305497
+select * from pg_stat_activity where pid = 30196

# 2021-04-29 09:42:56.933658
+\q

# 2021-04-29 09:43:14.269786
+/c engine_dev

# 2021-04-29 09:43:17.554809
+\c engine_dev

# 2021-04-29 09:43:21.446889
+delete from oban_jobs;

# 2021-04-29 09:50:49.942831
+exit

# 2021-04-30 15:05:24.241246
+SELECT s0."mfg_report_date", s0."make", s0."model", s0."year", s0."stock_photo" FROM (SELECT DISTINCT ON (sc1."division", sc1."model", sc1."model_year") sc0."mfg_report_date" AS "mfg_report_date", sc1."division" AS "make", sc1."model" AS "model", sc1."model_year" AS "year", ss4."stock_photos" -> 0 AS "stock_photo" FROM "chrome_recalls" AS sc0 INNER JOIN "chrome_style_recalls" AS sc5 ON sc5."chrome_recall_id" = sc0."id" INNER JOIN "chrome_styles" AS sc1 ON sc5."chrome_style_id" = sc1."id" INNER JOIN "vehicle_definitions" AS sv2 ON sv2."id" = sc1."vehicle_definition_id" INNER JOIN "model_years" AS sm3 ON sm3."id" = sv2."model_year_id" LEFT OUTER JOIN "stock_photo_collections" AS ss4 ON ss4."vehicle_definition_id" = sv2."id" WHERE (sm3."research" = TRUE)) AS s0 ORDER BY s0."mfg_report_date" DESC LIMIT 5

# 2021-04-30 15:05:37.023609
+EXPLAIN ANALYZE SELECT s0."mfg_report_date", s0."make", s0."model", s0."year", s0."stock_photo" FROM (SELECT DISTINCT ON (sc1."division", sc1."model", sc1."model_year") sc0."mfg_report_date" AS "mfg_report_date", sc1."division" AS "make", sc1."model" AS "model", sc1."model_year" AS "year", ss4."stock_photos" -> 0 AS "stock_photo" FROM "chrome_recalls" AS sc0 INNER JOIN "chrome_style_recalls" AS sc5 ON sc5."chrome_recall_id" = sc0."id" INNER JOIN "chrome_styles" AS sc1 ON sc5."chrome_style_id" = sc1."id" INNER JOIN "vehicle_definitions" AS sv2 ON sv2."id" = sc1."vehicle_definition_id" INNER JOIN "model_years" AS sm3 ON sm3."id" = sv2."model_year_id" LEFT OUTER JOIN "stock_photo_collections" AS ss4 ON ss4."vehicle_definition_id" = sv2."id" WHERE (sm3."research" = TRUE)) AS s0 ORDER BY s0."mfg_report_date" DESC LIMIT 5

# 2021-04-30 15:06:14.608414
+exit

# 2021-04-30 15:09:02.709837
+\d

# 2021-04-30 15:09:14.230033
+\d chrome_style_recalls

# 2021-04-30 15:09:54.629482
+\d chrome_recalls

# 2021-04-30 15:15:43.462904
+    SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+    FROM 
+      "chrome_recalls" AS "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+    WHERE 
+      ("model_years"."research" = TRUE)
+

# 2021-04-30 15:16:05.804937
+Explain analyze    SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+    FROM 
+      "chrome_recalls" AS "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+    WHERE 
+      ("model_years"."research" = TRUE)
+

# 2021-04-30 15:17:23.119090
+\d vehicle_definitions;

# 2021-04-30 15:19:19.737068
+Explain analyze    SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+    FROM 
+      "chrome_recalls" AS "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+    WHERE 
+      ("model_years"."research" = TRUE)
+    LIMIT 10

# 2021-04-30 15:20:13.368659
+SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+    FROM 
+      "chrome_recalls" AS "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+    WHERE 
+      ("model_years"."research" = TRUE)
+    LIMIT 1

# 2021-04-30 15:21:01.934775
+SELECT * FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id

# 2021-04-30 15:21:25.841500
+explain SELECT * FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id

# 2021-04-30 15:21:38.393896
+\d chrome_style_recalls

# 2021-04-30 15:21:56.666657
+\d chrome_recalls

# 2021-04-30 15:22:49.214047
+\di chrome_style_recalls

# 2021-04-30 15:23:03.998186
+\d chrome_style_recalls

# 2021-04-30 15:23:27.434224
+explain SELECT * FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id

# 2021-04-30 15:23:39.651388
+explain ANALYZE SELECT * FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id LIMIT 1

# 2021-04-30 15:23:49.606907
+\d chrome_style_recalls

# 2021-04-30 15:23:57.942370
+\d chrome_recalls

# 2021-04-30 15:24:04.559618
+explain ANALYZE SELECT * FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id LIMIT 1

# 2021-04-30 15:41:03.442495
+explain ANALYZE SELECT chrome_style_recalls.* FROM "chrome_recalls" INNER JOIN chrome_style_recalls ON chrome_style_recalls.chrome_recall_id = "chrome_recalls".id LIMIT 1

# 2021-04-30 15:41:56.532553
+SELECT * FROM "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+LIMIT 1
+

# 2021-04-30 15:42:08.818883
+EXPLAIN ANALYZE SELECT * FROM "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+LIMIT 1
+

# 2021-04-30 15:42:56.744176
+SELECT * FROM "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 15:43:08.040615
+EXPLAIN ANALYZE SELECT * FROM "chrome_recalls" 
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id" 
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id" 
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id" 
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 15:43:58.722320
+\d vehicle_definitions

# 2021-04-30 16:14:59.813075
+SELECT "chrome_recalls".* FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:15:09.978852
+EXPLAIN ANALYZE SELECT "chrome_recalls".* FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:18:00.112991
+\d stock_photo_collections;

# 2021-04-30 16:43:03.655688
+ SELECT "chrome_recalls".* FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:43:13.995850
+EXPLAIN ANALYZE SELECT "chrome_recalls".* FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:44:27.335049
+SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+   FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:44:46.585844
+EXPLAIN ANALYZE SELECT 
+   DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+   FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:45:12.830341
+SELECT 
+      DISTINCT ON (
+        "chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year"
+      ) "chrome_recalls"."mfg_report_date" AS "mfg_report_date", 
+      "chrome_styles"."division" AS "make", 
+      "chrome_styles"."model" AS "model", 
+      "chrome_styles"."model_year" AS "year", 
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo" 
+   FROM "model_years" 
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id" 
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id" 
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:45:40.629573
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:45:55.188706
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:48:44.718296
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+      GROUP BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")
+   LIMIT 1
+

# 2021-04-30 16:48:52.830745
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+      GROUP BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")
+   LIMIT 1
+

# 2021-04-30 16:49:09.344704
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+      GROUP BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")
+   LIMIT 1
+w

# 2021-04-30 16:49:16.950521
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+      GROUP BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")
+   LIMIT 1
+

# 2021-04-30 16:49:49.475929
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 1
+

# 2021-04-30 16:50:08.745126
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+      GROUP BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")
+   LIMIT 10
+

# 2021-04-30 16:50:23.125133
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10
+

# 2021-04-30 16:50:42.026053
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10
+

# 2021-04-30 16:55:50.717987
+SELECT DISTINCT( 
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10
+

# 2021-04-30 16:56:01.105186
+SELECT DISTINCT( 
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year")
+
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10
+

# 2021-04-30 16:56:20.218017
+SELECT DISTINCT ON( 
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year")
+
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      INNER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10
+

# 2021-04-30 16:57:01.291563
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   
+

# 2021-04-30 16:57:10.989464
+SELECT
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year"
+   FROM "model_years"
+      INNER JOIN "vehicle_definitions" ON "vehicle_definitions"."model_year_id" = "model_years"."id"
+      INNER JOIN "chrome_styles" ON "chrome_styles"."vehicle_definition_id" = "vehicle_definitions"."id"
+      INNER JOIN "chrome_style_recalls" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "chrome_recalls" ON "chrome_recalls"."id" = "chrome_style_recalls"."chrome_recall_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+      WHERE ("model_years"."research" = TRUE)
+   LIMIT 10

# 2021-04-30 17:00:57.016944
+SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+

# 2021-04-30 17:01:05.374678
+SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    LIMIT 10

# 2021-04-30 17:01:16.793119
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    LIMIT 10

# 2021-04-30 17:04:39.026996
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    GROUP BY "chrome_recalls"."division"

# 2021-04-30 17:04:54.656058
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    GROUP BY "chrome_styles"."division"

# 2021-04-30 17:05:22.297379
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make",
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    GROUP BY "chrome_styles"."division"

# 2021-04-30 17:05:27.113112
+EXPLAIN ANALYZE SELECT
+      "chrome_styles"."division" AS "make"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    GROUP BY "chrome_styles"."division"

# 2021-04-30 17:07:10.491203
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    ORDER BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")

# 2021-04-30 17:07:19.817671
+ 

# 2021-04-30 17:07:26.216654
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    ORDER BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year")

# 2021-04-30 17:07:30.877301
+EXPLAIN ANALYZE SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    ORDER BY ("chrome_styles"."division", "chrome_styles"."model", "chrome_styles"."model_year") LIMIT 1

# 2021-04-30 17:08:35.080483
+SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+    LIMIT 10

# 2021-04-30 17:09:09.977768
+select * from chrome_recalls;

# 2021-04-30 17:09:18.194439
+select count(*) from chrome_recalls;

# 2021-04-30 17:09:31.906409
+select * from chrome_recalls limit 10;

# 2021-04-30 17:09:41.289896
+\x

# 2021-04-30 17:09:42.300319
+select * from chrome_recalls limit 10;

# 2021-04-30 17:11:16.624806
+select * from chrome_styles group by ("division", "model", "year") limit 10;

# 2021-04-30 17:11:23.823598
+select * from chrome_styles group by ("division", "model", "model_year") limit 10;

# 2021-04-30 17:11:36.310265
+select "division", "model", "model_year" from chrome_styles group by ("division", "model", "model_year") limit 10;

# 2021-04-30 17:11:44.691345
+explain analyze select "division", "model", "model_year" from chrome_styles group by ("division", "model", "model_year") limit 10;

# 2021-04-30 17:11:59.755967
+select count(*) from chrome_styles;

# 2021-04-30 17:19:15.872215
+explain analyze select "division", "model", "model_year" from chrome_styles group by ("division", "model", "model_year") limit 10;

# 2021-04-30 17:19:21.979117
+select "division", "model", "model_year" from chrome_styles group by ("division", "model", "model_year") limit 10;

# 2021-04-30 17:19:34.402141
+\d chrome_styles;

# 2021-04-30 17:19:37.439117
+\x

# 2021-04-30 17:19:38.653866
+\d chrome_styles;

# 2021-04-30 17:20:01.085405
+select count(*) from vehicle_definitions;

# 2021-04-30 17:20:06.248515
+\d vehicle_definitions;

# 2021-04-30 17:20:45.626388
+\d chrome_styles;

# 2021-04-30 17:21:08.836126
+select count(*) from vehicle_definitions;

# 2021-04-30 17:21:23.729721
+select count(*) from vehicle_definitions group by division, model, model_year

# 2021-04-30 17:21:35.803161
+select count(*) from chrome_styles group by division, model, model_year;

# 2021-04-30 17:21:48.515923
+\d chrome_styles;

# 2021-04-30 17:22:39.422507
+/q

# 2021-04-30 17:22:40.613742
+\q

# 2021-05-01 11:52:22.176313
+EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON) SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 11:52:48.513564
+\x

# 2021-05-01 11:52:49.584021
+EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON) SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:03:41.353109
+SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:03:54.267423
+explain analyze SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:04:04.561961
+\x

# 2021-05-01 12:04:05.564893
+explain analyze SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:05:10.534906
+SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT DISTINCT ON( "chrome_styles"."division", "chrome_styles"."model",
+    "chrome_style"."model_year" )
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:05:26.633243
+SELECT
+  s0."mfg_report_date",
+  s0."make",
+  s0."model",
+  s0."year",
+  s0."stock_photo"
+FROM
+  (
+    SELECT DISTINCT ON( "chrome_styles"."division", "chrome_styles"."model",
+    "chrome_styles"."model_year" )
+      "chrome_recalls"."mfg_report_date" AS "mfg_report_date",
+      "chrome_styles"."division" AS "make",
+      "chrome_styles"."model" AS "model",
+      "chrome_styles"."model_year" AS "year",
+      "stock_photo_collections"."stock_photos" -> 0 AS "stock_photo"
+    FROM
+      "chrome_recalls" AS "chrome_recalls"
+      INNER JOIN "chrome_style_recalls" AS "chrome_style_recalls" ON "chrome_style_recalls"."chrome_recall_id" = "chrome_recalls"."id"
+      INNER JOIN "chrome_styles" AS "chrome_styles" ON "chrome_style_recalls"."chrome_style_id" = "chrome_styles"."id"
+      INNER JOIN "vehicle_definitions" AS "vehicle_definitions" ON "vehicle_definitions"."id" = "chrome_styles"."vehicle_definition_id"
+      INNER JOIN "model_years" AS "model_years" ON "model_years"."id" = "vehicle_definitions"."model_year_id"
+      LEFT OUTER JOIN "stock_photo_collections" AS "stock_photo_collections" ON "stock_photo_collections"."vehicle_definition_id" = "vehicle_definitions"."id"
+    WHERE
+      ("model_years"."research" = TRUE)
+  ) AS s0
+ORDER BY
+  s0."mfg_report_date" DESC
+LIMIT
+  5
+

# 2021-05-01 12:07:37.257770
+\q

# 2021-05-01 17:55:30.291144
+/c engine_dev

# 2021-05-01 17:55:33.372697
+\c engine_dev

# 2021-05-01 17:55:40.156814
+\d vehicle_definitions;

# 2021-05-01 17:56:04.164037
+\d stock_photo_collections;

# 2021-05-03 10:38:43.849710
+\q

# 2021-05-05 09:33:39.929439
+/c engine_dev

# 2021-05-05 09:33:42.270341
+\c engine_dev

# 2021-05-05 09:33:50.630096
+truncate table oban_jobs;

# 2021-05-05 09:33:59.833037
+select * from oban_jobs;

# 2021-05-05 09:34:01.495034
+\q

# 2021-05-05 09:56:51.907170
+/c engine_dev

# 2021-05-05 09:56:53.661937
+\c engine_dev

# 2021-05-05 09:56:58.735926
+\d listings

# 2021-05-06 14:32:43.738548
+\c engine_dev

# 2021-05-06 14:32:48.421502
+\d zip_codes

# 2021-05-06 14:33:04.788145
+\q

# 2021-05-07 08:55:58.493714
+\c engine_dev

# 2021-05-07 08:56:04.828851
+\d listings

# 2021-05-07 10:04:21.447775
+\q

# 2021-05-10 11:52:28.627101
+/c engine_dev

# 2021-05-10 11:52:30.584157
+\c engine_dev

# 2021-05-10 11:52:33.891871
+\d listings

# 2021-05-10 11:52:37.851708
+\q

# 2021-05-10 16:29:28.738972
+/c engine_dev

# 2021-05-10 16:29:30.717449
+\c engine_dev

# 2021-05-10 16:29:36.432373
+\d media

# 2021-05-10 16:29:49.361748
+\d

# 2021-05-10 16:30:08.947079
+truncate table media;

# 2021-05-10 16:30:22.009319
+truncate table cascade media;

# 2021-05-10 16:30:30.357636
+truncate cascade table media;

# 2021-05-10 16:30:38.691698
+truncate table media cascade;

# 2021-05-10 16:36:11.633886
+refresh materialized view base_trims_mv;

# 2021-05-10 16:36:26.932712
+\q

# 2021-05-10 16:42:08.885110
+\c engine_dev

# 2021-05-10 16:42:11.134643
+refresh materialized view base_trims_mv;

# 2021-05-10 16:42:23.205544
+refresh materialized view egress_listings_mv;

# 2021-05-10 16:46:13.489411
+\c engine_dev

# 2021-05-10 16:46:18.158268
+select * from listings;

# 2021-05-10 16:46:42.617156
+\x

# 2021-05-10 16:46:45.528419
+\q

# 2021-05-12 09:12:16.797091
+\c engine_dev

# 2021-05-12 09:12:19.485026
+\d

# 2021-05-12 09:12:30.159552
+select * from dealer_phones;

# 2021-05-12 09:12:58.790304
+select distinct phone_type from dealer_phones;

# 2021-05-20 10:38:26.852340
+SELECT vehicle_definition_id from base_trims_mv where make_slug = 'acura' and model_slug = 'rl' and year_name = '2012';

# 2021-05-20 10:38:34.377861
+EXPLAIN SELECT vehicle_definition_id from base_trims_mv where make_slug = 'acura' and model_slug = 'rl' and year_name = '2012';

# 2021-05-20 10:39:22.414876
+SELECT * from vehicle_competitors where vehicle_definition_id = '2f2e5f53-37c3-4787-93ae-5928dcc8c90f'

# 2021-05-20 10:40:03.589641
+\di

# 2021-05-20 10:40:15.618473
+SELECT * from vehicle_competitors where vehicle_definition_id = '2f2e5f53-37c3-4787-93ae-5928dcc8c90f'

# 2021-05-20 10:41:55.662205
+select base_trims_mv.make_slug, base_trims_mv.model_slug, base_trims_mv.year_name from vehicle_competitors inner join base_trims_mv on base_trims_mv.vehicle_definition_id = vehicle_competitors.competitor_definition_id

# 2021-05-20 10:42:45.636551
+select base_trims_mv.make_slug, base_trims_mv.model_slug, base_trims_mv.year_name from vehicle_competitors inner join base_trims_mv on base_trims_mv.vehicle_definition_id = vehicle_competitors.competitor_definition_id where vehicle_competitors.vehicle_definition_id = '2f2e5f53-37c3-4787-93ae-5928dcc8c90f'

# 2021-05-20 10:44:36.010226
+\q

# 2021-05-20 14:36:32.095108
+\c engine_dev

# 2021-05-20 14:36:40.329947
+truncate table oban_jobs;

# 2021-05-20 14:36:45.134208
+\q

# 2021-05-20 14:46:55.095381
+select * from zip_codes where zip_code = '99759'

# 2021-05-20 14:47:06.086918
+\c engine_dev

# 2021-05-20 14:47:07.649794
+select * from zip_codes where zip_code = '99759'

# 2021-05-20 14:47:12.208065
+select * from zip_codes;

# 2021-05-20 14:55:02.245094
+\c engine_dev

# 2021-05-20 14:55:26.935528
+\d zip_codes

# 2021-05-20 14:55:46.658821
+select * from states;

# 2021-05-20 14:58:12.539100
+\q

# 2021-05-26 11:26:56.810639
+/c engine_dev

# 2021-05-26 11:26:59.113983
+\c engine_dev

# 2021-05-26 11:27:03.951991
+select * from zip_codes;

# 2021-05-26 11:27:42.315736
+\q

# 2021-05-26 11:28:59.592791
+\c engine_dev

# 2021-05-26 11:29:05.341530
+select * from zip_codes;

# 2021-05-27 11:32:47.281228
+select * from oban_jobs;

# 2021-05-28 15:13:39.734549
+\d

# 2021-05-28 15:13:57.442484
+select * from dealers;

# 2021-05-28 15:14:06.342177
+select * from dealers limit 10;

# 2021-05-28 15:14:07.747798
+\x

# 2021-05-28 15:14:08.974597
+select * from dealers limit 10;

# 2021-05-28 15:14:50.654383
+select * from dealer_product_features where dealer_id = "05a1feb1-2e9d-40b2-b461-9bbf1c504d40";

# 2021-05-28 15:14:59.599783
+select * from dealer_product_features where dealer_id = '05a1feb1-2e9d-40b2-b461-9bbf1c504d40';

# 2021-05-28 15:16:36.384853
+select * from dealers inner join dealer_product_features on dealer_product_features.dealer_id = dealers.id inner join product_features ON product_features.id = dealer_product_features.product_feature_id join features ON features.id = product_features.feature_id where f.code = "DEALER_INVENTORY_PRODUCT"limit 10;

# 2021-05-28 15:16:42.763474
+select * from dealers inner join dealer_product_features on dealer_product_features.dealer_id = dealers.id inner join product_features ON product_features.id = dealer_product_features.product_feature_id join features ON features.id = product_features.feature_id where features.code = "DEALER_INVENTORY_PRODUCT"limit 10;

# 2021-05-28 15:16:53.856959
+select * from dealers inner join dealer_product_features on dealer_product_features.dealer_id = dealers.id inner join product_features ON product_features.id = dealer_product_features.product_feature_id join features ON features.id = product_features.feature_id where features.code = 'DEALER_INVENTORY_PRODUCT' limit 10;

# 2021-05-28 15:17:06.861336
+select * from dealers inner join dealer_product_features on dealer_product_features.dealer_id = dealers.id inner join product_features ON product_features.id = dealer_product_features.product_feature_id join features ON features.id = product_features.feature_id where features.code = 'DEALER_INVENTORY_PRODUCT' limit 1;

# 2021-05-28 15:18:03.640198
+\d dealer_product_features

# 2021-05-28 15:18:04.688831
+;

# 2021-05-28 15:18:15.297667
+\d features;

# 2021-05-28 15:18:23.485471
+select * from features;

# 2021-05-28 15:21:33.703378
+select count(*) from features;

# 2021-05-28 15:21:45.911327
+select * from features where name like '%CPO%'

# 2021-05-28 15:22:09.490777
+select * from business_partners limit 10;

# 2021-05-28 15:40:57.051617
+\d dealers;

# 2021-05-28 15:41:00.629599
+\x

# 2021-05-28 15:41:01.630820
+\d dealers;

# 2021-05-28 15:47:38.862104
+select * from certified_pre_owned_programs;

# 2021-05-28 15:47:45.781866
+\x

# 2021-05-28 15:47:46.760892
+select * from certified_pre_owned_programs;

# 2021-05-28 15:50:31.991600
+select * from business_partners limit 10;

# 2021-06-02 10:44:38.120252
+select * from listings;

# 2021-06-02 10:44:53.416812
+\c engine_dev

# 2021-06-02 10:44:56.699604
+select * from listings;

# 2021-06-02 10:45:07.354829
+\c

# 2021-06-02 10:45:09.043017
+\d

# 2021-06-02 10:45:21.933490
+select * from inventory;

# 2021-06-02 10:45:26.265670
+\d inventory

# 2021-06-02 10:45:47.136075
+\d inventory_auto_correct

# 2021-06-02 10:45:52.693697
+\d inventory_dealer_overrides

# 2021-06-02 10:46:38.795430
+\d inventory_displays

# 2021-06-02 10:47:07.698470
+select * from inventory_displays;

# 2021-06-02 10:47:14.323669
+select provided_features from inventory_displays;

# 2021-06-02 10:48:00.034054
+select ad_description from inventory_displays;

# 2021-06-02 13:40:55.985293
+select * from ip_geographic_mappings;

# 2021-06-02 13:42:36.647811
+\d ip_geographic_mappings

# 2021-06-02 13:55:49.936585
+\q

# 2021-06-03 15:49:08.035417
+select * from ip_geographic_mappings;

# 2021-06-03 15:49:11.512106
+\c engine_dev

# 2021-06-03 15:49:12.489793
+select * from ip_geographic_mappings;

# 2021-06-03 15:49:30.727376
+select * from zip_codes;

# 2021-06-03 15:50:10.631482
+update zip_codes set(city, "Barrow") where zip_code = "99759"

# 2021-06-03 15:50:34.289772
+update zip_codes set city = "Barrow" where zip_code = "99759"

# 2021-06-03 15:50:43.031416
+update zip_codes set city = 'Barrow' where zip_code = '99759'

# 2021-06-03 15:50:46.305025
+select * from zip_codes;

# 2021-06-07 09:56:17.138616
+select * from zip_codes where zip_code = '99759'

# 2021-06-07 09:56:18.398099
+\x

# 2021-06-07 09:56:19.556951
+select * from zip_codes where zip_code = '99759'

# 2021-06-08 15:59:11.320806
+a

# 2021-06-08 15:59:13.890460
+\q

# 2021-06-08 15:59:49.924976
+select * from listing_incentives limit 10;

# 2021-06-08 16:36:34.234235
+select * from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true limit 10;

# 2021-06-08 16:36:53.369633
+select * from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true limit 10 and search_rank_1 > 0;

# 2021-06-08 16:37:22.508194
+select listings.* from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true and listings.search_rank_1 > 0 limit 10;

# 2021-06-08 16:37:36.897623
+\x

# 2021-06-08 16:37:37.808472
+select listings.* from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true and listings.search_rank_1 > 0 limit 10;

# 2021-06-08 16:37:48.901428
+\x

# 2021-06-08 16:37:54.558871
+select listings.* from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true and listings.search_rank_1 > 0 limit 10;

# 2021-06-08 16:38:50.317120
+select listings.id from listing_incentives inner join listings on listings.id = listing_incentives.listing_id where listings.listed = true and listings.search_rank_1 > 0 limit 10;

# 2021-06-09 10:38:21.339507
+select * from inventory;

# 2021-06-09 10:38:31.270611
+/c engine_dev

# 2021-06-09 10:38:34.824115
+select * from inventory;

# 2021-06-09 10:38:38.490834
+\c engine_dev

# 2021-06-09 10:38:39.718653
+select * from inventory;

# 2021-06-09 10:38:44.332443
+\d inventory

# 2021-06-09 10:39:04.265430
+\d engines

# 2021-06-09 10:40:11.622155
+\d inventory

# 2021-06-09 10:41:37.730982
+select * from engines;

# 2021-06-09 10:41:58.497323
+select * from inventory where engine_id not null;

# 2021-06-09 10:42:03.255355
+select * from inventory where engine_id is not null;

# 2021-06-09 10:42:08.723373
+select * from inventory where engine_id is null;

# 2021-06-09 10:42:50.371384
+\q

# 2021-06-09 10:45:47.450242
+select * from inventory where engine_id is null limit 10;

# 2021-06-09 10:45:55.941922
+select * from inventory where engine_id is not null limit 10;

# 2021-06-09 10:46:10.781318
+select count(*) from inventory where engine_id is not null;

# 2021-06-09 10:46:24.360306
+select count(*) from inventory where cylinder_count is not null;

# 2021-06-09 10:47:02.588734
+\d inventory

# 2021-06-09 10:47:21.896497
+\d engines

# 2021-06-09 10:47:40.850945
+select count(*) from inventory where engine_id is not null;

# 2021-06-09 10:47:50.559734
+select count(*) from inventory where cylinder_count is not null;

# 2021-06-10 11:23:44.320691
+\q

# 2021-06-11 08:25:01.656467
+select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(inventory.make_id) > 20

# 2021-06-11 08:25:18.675085
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(inventory.make_id) > 20

# 2021-06-11 08:25:44.234925
+\d makes

# 2021-06-11 08:26:04.304081
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:26:21.068351
+select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:26:28.075783
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:26:53.604185
+\d inventory

# 2021-06-11 08:27:45.936887
+select * from inventory where deleted_at > NOW() limit 10;

# 2021-06-11 08:27:56.366640
+select * from inventory where listed = true limit 10;

# 2021-06-11 08:28:02.371679
+select deleted_at from inventory where listed = true limit 10;

# 2021-06-11 08:28:30.622719
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.deleted_at is not null group by makes.id having count(makes.id) > 20

# 2021-06-11 08:28:51.220066
+\d inventory

# 2021-06-11 08:29:07.838757
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:29:41.969691
+select count(*) from makes;

# 2021-06-11 08:30:00.768549
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.deleted_at is null group by makes.id having count(makes.id) > 20

# 2021-06-11 08:31:03.562553
+select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.deleted_at is null group by makes.id having count(makes.id) > 20

# 2021-06-11 08:31:13.103029
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:31:24.623260
+select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.listed = true group by makes.id having count(makes.id) > 20

# 2021-06-11 08:31:58.710190
+\d inventory

# 2021-06-11 08:32:38.478428
+select * from inventory where deleted_at is null limit 10;

# 2021-06-11 08:32:47.390374
+select count(*) from inventory where deleted_at is null limit 10;

# 2021-06-11 08:33:17.617842
+explain select * from inventory where deleted_at is null limit 10;

# 2021-06-11 08:33:29.204593
+explain select * from inventory where deleted_at is null;

# 2021-06-11 08:33:40.500521
+\d inventory

# 2021-06-11 08:34:54.965506
+select makes.name, makes.slug from inner join makes on makes.id = inventory.make_id inventory where deleted_at is null;

# 2021-06-11 08:35:08.059588
+select makes.name, makes.slug from inventory inner join makes on makes.id = inventory.make_id where deleted_at is null;

# 2021-06-11 08:35:40.178420
+\d listings;

# 2021-06-11 08:36:19.955327
+explain analyze select makes.name, makes.slug from inventory inner join makes on makes.id = inventory.make_id inner join listings on listings.inventory_id = inventory.id where listings.deleted_at is null;

# 2021-06-11 08:37:16.554555
+explain select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.deleted_at is null group by makes.id having count(makes.id) > 20

# 2021-06-11 08:37:30.775720
+explain analyze select makes.name, makes.slug from makes inner join inventory on inventory.make_id = makes.id where inventory.deleted_at is null group by makes.id having count(makes.id) > 20

# 2021-06-11 08:39:04.509830
+select count(*) from listings where deleted_at is null;

# 2021-06-11 08:39:19.322889
+select count(*) from listings where listed = true;

# 2021-06-11 08:39:50.777662
+select count(*) from listings where deleted_at is not null;

# 2021-06-11 08:39:59.058900
+select count(*) from listings where listed = false;

# 2021-06-11 08:41:48.488185
+select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listing.listed = true group by make.id

# 2021-06-11 08:41:53.852831
+select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listings.listed = true group by make.id

# 2021-06-11 08:41:58.150875
+select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listings.listed = true group by makes.id

# 2021-06-11 08:42:10.446958
+explain analyze select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listings.listed = true group by makes.id

# 2021-06-11 08:42:53.387002
+explain analyze select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listings.deleted_at > now() group by makes.id

# 2021-06-11 08:43:09.836186
+select count(*) from listings where deleted_at > now();

# 2021-06-11 08:43:21.725869
+select count(*) from listings where deleted_at < now();

# 2021-06-11 08:43:32.199472
+select count(*) from listings;

# 2021-06-11 08:43:48.917952
+select count(*) from listings where listed = true;

# 2021-06-11 08:44:02.655332
+select 3925875-1971130

# 2021-06-11 08:44:22.328748
+explain analyze select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where listings.deleted_at < now() group by makes.id

# 2021-06-11 08:45:23.325413
+\d listings;

# 2021-06-11 08:45:32.159572
+\d inventory

# 2021-06-11 08:46:08.561935
+explain analyze select makes.name, makes.slug from listings inner join inventory ON inventory.id = listings.inventory_id inner join makes ON makes.id = inventory.make_id where inventory.listed = true group by makes.id

# 2021-06-11 08:46:48.086975
+select * from listings where listed_at < now();

# 2021-06-11 08:46:55.352723
+select count(*) from listings where listed_at < now();

# 2021-06-11 08:47:04.329066
+select count(*) from listings where listed = true;

# 2021-06-11 08:47:09.311780
+explain analyze select count(*) from listings where listed = true;

# 2021-06-22 09:11:18.271820
+select * from zip_codes where zip_code = '99759'

# 2021-06-22 09:11:25.987348
+use engine_dev;

# 2021-06-22 09:11:27.225123
+select * from zip_codes where zip_code = '99759'

# 2021-06-22 09:21:14.260184
+exit

# 2021-06-23 09:44:25.539990
+\q

# 2021-06-23 09:46:23.176953
+\c engine_dev

# 2021-06-23 09:46:35.001751
+\d dealers

# 2021-06-23 09:46:54.890791
+\d dealers_makes

# 2021-06-23 10:01:28.224582
+\d model_years

# 2021-06-23 10:03:04.975691
+\d makes

# 2021-06-23 10:03:11.321963
+\d trims

# 2021-06-23 10:09:39.082569
+\d base_trims_mv

# 2021-06-23 10:09:48.409426
+select * from base_trims_mv

# 2021-06-23 10:50:54.895644
+select * from dealers where customer_id = '5366539'

# 2021-06-23 10:50:56.535279
+\x

# 2021-06-23 10:50:57.517040
+select * from dealers where customer_id = '5366539'

# 2021-06-23 10:51:25.383017
+select m.name, m.slug, md.name, md.slug, y.name, bs.name, ic.*
+from incentives ic
+inner join vehicle_definitions vd on vd.id = ic.vehicle_definition_id
+inner join model_years my on my.id = vd.model_year_id
+inner join models md on md.id = my.model_id
+inner join makes m on m.id = md.make_id
+inner join body_styles bs on bs.id = vd.body_style_id
+inner join trims t on t.model_year_id = my.id
+inner join dealers_makes dm on dm.make_id = m.id
+inner join years y on y.id = my.year_id
+where dm.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 10:52:46.937434
+explain select m.name, m.slug, md.name, md.slug, y.name, bs.name, ic.*
+from incentives ic
+inner join vehicle_definitions vd on vd.id = ic.vehicle_definition_id
+inner join model_years my on my.id = vd.model_year_id
+inner join models md on md.id = my.model_id
+inner join makes m on m.id = md.make_id
+inner join body_styles bs on bs.id = vd.body_style_id
+inner join trims t on t.model_year_id = my.id
+inner join dealers_makes dm on dm.make_id = m.id
+inner join years y on y.id = my.year_id
+where dm.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 10:52:49.883167
+\x

# 2021-06-23 10:52:52.606963
+explain select m.name, m.slug, md.name, md.slug, y.name, bs.name, ic.*
+from incentives ic
+inner join vehicle_definitions vd on vd.id = ic.vehicle_definition_id
+inner join model_years my on my.id = vd.model_year_id
+inner join models md on md.id = my.model_id
+inner join makes m on m.id = md.make_id
+inner join body_styles bs on bs.id = vd.body_style_id
+inner join trims t on t.model_year_id = my.id
+inner join dealers_makes dm on dm.make_id = m.id
+inner join years y on y.id = my.year_id
+where dm.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 10:53:32.746817
+select m.name, m.slug, md.name, md.slug, y.name, bs.name, ic.*
+from incentives ic
+inner join vehicle_definitions vd on vd.id = ic.vehicle_definition_id
+inner join model_years my on my.id = vd.model_year_id
+inner join models md on md.id = my.model_id
+inner join makes m on m.id = md.make_id
+inner join body_styles bs on bs.id = vd.body_style_id
+inner join trims t on t.model_year_id = my.id
+inner join dealers_makes dm on dm.make_id = m.id
+inner join years y on y.id = my.year_id
+where dm.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 10:54:58.081493
+select ic.* from incentives ic limit 10;

# 2021-06-23 10:55:11.062212
+explain analyze select ic.* from incentives ic limit 10;

# 2021-06-23 10:55:36.298461
+select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id limit 10;

# 2021-06-23 10:55:42.935376
+explain analyze select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id limit 10;

# 2021-06-23 10:56:49.806326
+select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id limit 10;

# 2021-06-23 10:57:01.653673
+explain analyze select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id limit 10;

# 2021-06-23 10:57:33.681519
+select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id inner join dealers_makes ON dealers_makes.make_id = makes.id;

# 2021-06-23 10:57:53.449575
+\d dealers_makes;

# 2021-06-23 10:59:02.974409
+select count(*) from dealers_makes;

# 2021-06-23 11:01:05.747776
+select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join dealers_makes ON dealers_makes.make_id = makes.id;

# 2021-06-23 11:01:35.856751
+select ic.* from incentives ic inner join vehicle_definitions ON vehicle_definitions.id = ic.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join dealers_makes ON dealers_makes.make_id = makes.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:03:33.082151
+select * from dealers_makes where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:05:27.228441
+select vehicle_definitions.* from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:06:11.249707
+select distinct vehicle_definitions.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:06:55.667291
+select count(distinct vehicle_definitions.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:07:34.040406
+select count(distinct model_years.year_id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:08:12.854050
+select count(distinct model_years.year_id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:08:31.947070
+select distinct years.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:08:49.508458
+select vehicle_definitions.* from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:09:01.724060
+explain analyze select vehicle_definitions.* from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:10:38.859197
+select ic.* from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:10:50.089150
+select incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:11:13.734701
+select count(incentives.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:11:22.240947
+select count(distinct incentives.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:13:35.227884
+\d incentives

# 2021-06-23 11:14:13.447174
+select payload from incentives limit 1;

# 2021-06-23 11:14:36.521920
+\x

# 2021-06-23 11:14:37.926873
+select payload from incentives limit 1;

# 2021-06-23 11:15:49.209732
+select incentives.id, makes.name, models.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:15:55.104454
+\x

# 2021-06-23 11:15:57.488435
+select incentives.id, makes.name, models.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:17:01.546778
+select incentives.id, makes.name, models.name, years.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:18:37.197987
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:19:19.802862
+select incentives.payload, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:19:54.158423
+select incentives.payload, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' limit 100;

# 2021-06-23 11:20:59.522419
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-23 11:21:54.738671
+select incentives.payload, makes.name, models.name, years.name, trims.name, vehicle_definitions.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:22:23.999070
+select incentives.id, makes.name, models.name, years.name, trims.name, vehicle_definitions.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:23:32.380110
+select distinct on vehicle_definitions.id, array_agg(incentives.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:23:42.684280
+select distinct on (vehicle_definitions.id), array_agg(incentives.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:24:19.912349
+select distinct on (vehicle_definitions.id), incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:24:35.897924
+select distinct on (vehicle_definitions.id) incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:24:57.183583
+select distinct on (vehicle_definitions.id) from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:25:20.775214
+select distinct on (vehicle_definitions.id) vehicle_defintions.id, incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:25:37.616795
+select distinct on (vehicle_definitions.id) vhd, incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:25:48.315888
+select distinct on (vehicle_definitions.id) vehicle_definitions.id, incentives.id from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:26:21.966507
+select distinct on (vehicle_definitions.id) vehicle_definitions.id, incentives.id, makes.name, models.name, years.name, trim.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:26:33.125571
+select distinct on (vehicle_definitions.id) vehicle_definitions.id, incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:26:54.208736
+select distinct on (vehicle_definitions.id) vehicle_definitions.id as vgd, incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:27:25.426976
+\d incentives

# 2021-06-23 11:28:21.600289
+select distinct on (vehicle_definitions.id) vehicle_definitions.id as vgd, incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:29:06.770693
+select * from incentives where vehicle_definition_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-23 11:29:27.031393
+select * from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:29:55.472242
+select count(*) from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:30:19.142758
+select incentives.zip_code from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:30:37.211918
+select incentives.zip_code, incentives.payload from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:32:17.326298
+select count distinct(incentives.zip_code) from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:32:28.205044
+select count(distinct incentives.zip_code) from incentives where vehicle_definition_id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-23 11:35:05.303174
+\d incentive_items;

# 2021-06-23 11:35:22.079237
+\d dealer_addresses

# 2021-06-23 11:36:45.335280
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:37:32.530231
+select incentives.id, incentives.payload, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:48:05.475809
+explain analyze select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:49:01.389548
+\d dealer_addresses

# 2021-06-23 11:49:13.033730
+\d incentives;

# 2021-06-23 11:50:12.671801
+SELECT i0."id", i0."payload", i0."zip_code", i0."cash", i0."finance", i0."vehicle_definition_id", i0."inserted_at", i0."updated_at", b6."name", m4."name", m4."slug", m3."name", m3."slug", t7."name", y5."name" FROM "incentives" AS i0 INNER JOIN "vehicle_definitions" AS v1 ON v1."id" = i0."vehicle_definition_id" INNER JOIN "model_years" AS m2 ON m2."id" = v1."model_year_id" INNER JOIN "models" AS m3 ON m3."id" = m2."model_id" INNER JOIN "makes" AS m4 ON m4."id" = m3."make_id" INNER JOIN "years" AS y5 ON y5."id" = m2."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v1."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m2."id" INNER JOIN "dealers_makes" AS d8 ON d8."make_id" = m4."id" INNER JOIN "dealers" AS d9 ON d9."id" = d8."dealer_id" INNER JOIN "dealer_addresses" AS d10 ON d10."dealer_id" = d9."id" WHERE ((d9."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' ) AND (d10."zip_code" = i0."zip_code"))

# 2021-06-23 11:50:28.804709
+SELECT i0."id", i0."zip_code", i0."cash", i0."finance", i0."vehicle_definition_id", i0."inserted_at", i0."updated_at", b6."name", m4."name", m4."slug", m3."name", m3."slug", t7."name", y5."name" FROM "incentives" AS i0 INNER JOIN "vehicle_definitions" AS v1 ON v1."id" = i0."vehicle_definition_id" INNER JOIN "model_years" AS m2 ON m2."id" = v1."model_year_id" INNER JOIN "models" AS m3 ON m3."id" = m2."model_id" INNER JOIN "makes" AS m4 ON m4."id" = m3."make_id" INNER JOIN "years" AS y5 ON y5."id" = m2."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v1."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m2."id" INNER JOIN "dealers_makes" AS d8 ON d8."make_id" = m4."id" INNER JOIN "dealers" AS d9 ON d9."id" = d8."dealer_id" INNER JOIN "dealer_addresses" AS d10 ON d10."dealer_id" = d9."id" WHERE ((d9."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' ) AND (d10."zip_code" = i0."zip_code"))

# 2021-06-23 11:50:55.153638
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims ON trims.id = vehicle_definitions.trim_id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:53:23.981409
+select incentive.id, makes.name, models.name, years.name, trims.name from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join years ON years.id = model_years.year_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id inner join dealers_makes ON dealers_makes.make_id = makes.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers.id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and dealer_addresses.zip_code = incentives.zip_code;

# 2021-06-23 11:53:34.310258
+select incentives.id, makes.name, models.name, years.name, trims.name from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join years ON years.id = model_years.year_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id inner join dealers_makes ON dealers_makes.make_id = makes.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers.id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and dealer_addresses.zip_code = incentives.zip_code;

# 2021-06-23 11:56:33.098329
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims on trims.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:56:51.705129
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims on trims.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:57:04.406730
+explain anaylze select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims on trims.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:57:08.164364
+explain analyze select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims on trims.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 11:57:30.957320
+explain analyze select incentives.id, makes.name, models.name, years.name, trims.name from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join years ON years.id = model_years.year_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id inner join dealers_makes ON dealers_makes.make_id = makes.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers.id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and dealer_addresses.zip_code = incentives.zip_code;

# 2021-06-23 11:58:23.023386
+select incentives.id, makes.name, models.name, years.name, trims.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join years ON years.id = model_years.year_id inner join trims on trims.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and incentives.zip_code = dealer_addresses.zip_code order by vehicle_definitions.id, incentives.inserted_at

# 2021-06-23 12:12:12.259533
+\d model_years

# 2021-06-23 12:19:59.244045
+a

# 2021-06-24 10:15:05.389707
+\c engine_dev

# 2021-06-24 10:15:16.185382
+\d

# 2021-06-24 10:16:03.662174
+explain analyze select incentives.id, makes.name, models.name, years.name, trims.name from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join years ON years.id = model_years.year_id inner join body_styles ON body_styles.id = vehicle_definitions.body_style_id inner join trims ON trims.model_year_id = model_years.id inner join dealers_makes ON dealers_makes.make_id = makes.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers.id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and dealer_addresses.zip_code = incentives.zip_code;

# 2021-06-24 10:16:14.958582
+\q

# 2021-06-29 14:48:04.037651
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '59317f20-e5e4-46c4-ad53-3ca54969ed46') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 14:48:11.528834
+use engine_dev;

# 2021-06-29 14:48:12.879267
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '59317f20-e5e4-46c4-ad53-3ca54969ed46') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 14:54:43.260663
+explain analyze SELECT b2."name", i7."id", i7."payload", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = '59317f20-e5e4-46c4-ad53-3ca54969ed46') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 14:55:20.205693
+exit

# 2021-06-29 14:57:04.928173
+select * from dealers where customer_id = '5366539'

# 2021-06-29 14:57:09.259115
+select id from dealers where customer_id = '5366539'

# 2021-06-29 14:58:18.526951
+explain analyze SELECT b2."name", i7."id", i7."payload", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 15:00:40.796839
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))
+

# 2021-06-29 15:01:39.523056
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:01:51.222963
+explain analyze SELECT b2."name", i7."id", i7."payload", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 15:03:24.048136
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:04:16.080225
+SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:04:30.131313
+SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL))) limit 100;

# 2021-06-29 15:04:50.932699
+SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL))) limit 100

# 2021-06-29 15:05:24.278600
+explain analyze SELECT b2."name", i7."id", i7."payload", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 15:05:39.005137
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:06:18.729181
+select count(*) from makes;

# 2021-06-29 15:08:09.014745
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779ea49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:08:23.752438
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:08:39.616688
+explain analyze SELECT b2."name", i7."id", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 15:09:53.067949
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:12:25.068984
+select count(*) from vehicle_definitions;

# 2021-06-29 15:12:32.922109
+select count(*) from listing_incentives;

# 2021-06-29 15:12:55.208878
+\d listing_incentives

# 2021-06-29 15:13:35.810828
+select count(*) from listing_incentives inner join incentives ON incentives.id = listing_incentives.incentive_id group by incentives.vehicle_definition_id

# 2021-06-29 15:15:42.757722
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') and (m1."slug" = 'dodge')AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:19:38.774275
+select count(*) from incentives;

# 2021-06-29 15:20:08.766189
+\d incentives;

# 2021-06-29 15:20:26.530667
+select count(*) from incentives where zip_code is null;

# 2021-06-29 15:21:20.261883
+select count(*) from incentives where zip_code is not null;

# 2021-06-29 15:26:22.238546
+\d base_trims_mv;

# 2021-06-29 15:28:14.875736
+\d vehicle_definitions;

# 2021-06-29 15:29:48.386798
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') and (m1."slug" = 'dodge')AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:30:04.283572
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:30:24.545203
+explain analyze SELECT b2."name", i7."id", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 15:34:04.594936
+select count(*) from (SELECT b2."name", i7."id", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name")

# 2021-06-29 15:34:12.474216
+select count(*) from (SELECT b2."name", i7."id", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name") as thing

# 2021-06-29 15:34:50.240774
+select count(*) from( SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))) as thing

# 2021-06-29 15:38:01.458476
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:41:58.637338
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id where makes.name = "Jeep"

# 2021-06-29 15:42:06.659689
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id where makes.name = 'Jeep'

# 2021-06-29 15:42:27.314597
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id where makes.name = 'Jeep' and trim.name = 'Willys' and model.name = 'Gladiator'

# 2021-06-29 15:42:41.164043
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join trims ON trims.id = vehicle_definitions.trim_id where makes.name = 'Jeep' and trim.name = 'Willys' and model.name = 'Gladiator'

# 2021-06-29 15:42:46.542235
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join trims ON trims.id = vehicle_definitions.trim_id where makes.name = 'Jeep' and trims.name = 'Willys' and model.name = 'Gladiator'

# 2021-06-29 15:42:54.922117
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join trims ON trims.id = vehicle_definitions.trim_id where makes.name = 'Jeep' and trims.name = 'Willys' and models.name = 'Gladiator'

# 2021-06-29 15:42:59.208592
+\x

# 2021-06-29 15:43:00.074962
+select * from vehicle_definitions inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join models ON models.id = model_years.model_id inner join makes ON makes.id = models.make_id inner join trims ON trims.id = vehicle_definitions.trim_id where makes.name = 'Jeep' and trims.name = 'Willys' and models.name = 'Gladiator'

# 2021-06-29 15:43:24.061116
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:43:33.544585
+\x

# 2021-06-29 15:43:34.421688
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:44:03.954002
+select * from vehicle_definitions where id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-29 15:46:55.287197
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:47:36.435724
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" inner join trims ON trims.id = v4.trim_id INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:48:07.914727
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" inner join trims as t7 ON trims.id = v4.trim_id INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:48:31.606525
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" inner join trims as t7 ON t7.id = v4.trim_id INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:51:22.137536
+select * from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join vehicle_definitions on vehicle_definitions.id = makes.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealers.id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50' and dealer_addresses.zip_code = incentives.zip_code;

# 2021-06-29 15:52:18.444340
+select * from dealers_makes where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:52:29.086641
+select * from dealers_makes inner join makes ON makes.id = dealers_makes.make_id where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:53:31.638514
+select * from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:54:23.253590
+select vehicle_defintions.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:54:40.938514
+select vehicle_definitions.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:55:08.343678
+select vehicle_definitions.name from dealers_makes inner join makes ON makes.id = dealers_makes.make_id inner join models ON models.make_id = makes.id inner join model_years ON model_years.model_id = models.id inner join vehicle_definitions ON vehicle_definitions.model_year_id = model_years.id inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50';

# 2021-06-29 15:55:26.434421
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" inner join trims as t7 ON trims.id = v4.trim_id INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:55:30.440103
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" inner join trims as t7 ON t7.id = v4.trim_id INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:55:37.954137
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 15:57:05.120671
+select * from vehicle_definitions where id = '01d79814-b361-4397-bf2e-3a0dc8ddb736'

# 2021-06-29 15:57:53.823175
+select * from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id;

# 2021-06-29 15:58:15.862874
+select count(*) from trims.id

# 2021-06-29 15:58:18.246954
+select count(*) from trims;

# 2021-06-29 15:58:24.198725
+select count(*) from vehicle_definitions;

# 2021-06-29 15:59:45.380683
+select * from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.slug = 'Willys'

# 2021-06-29 16:00:03.278969
+select * from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:00:25.476552
+select name from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:00:44.106032
+select vehicle_defintions.trim, trims.name from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:00:52.971108
+select vehicle_definitions.trim, trims.name from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:01:01.588667
+select vehicle_definitions.name, trims.name from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:01:15.618268
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:01:27.025347
+SELECT v4.name, b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:03:37.516739
+select * from dealers_makes group by dealers_makes.dealer_id having max(dealer_id)

# 2021-06-29 16:04:28.761201
+select count(*) as make_count from dealers_makes group by dealers_makes.dealer_id having max(make_count)

# 2021-06-29 16:04:55.424024
+select count(*) from dealers_makes group by dealers_makes.dealer_id order by count(*)

# 2021-06-29 16:04:58.821728
+select count(*) from dealers_makes group by dealers_makes.dealer_id order by count(*) desc

# 2021-06-29 16:05:01.837556
+select count(*) from dealers_makes group by dealers_makes.dealer_id order by count(*) desc 1

# 2021-06-29 16:05:04.964545
+select count(*) from dealers_makes group by dealers_makes.dealer_id order by count(*) desc limit 1

# 2021-06-29 16:05:22.334514
+select count(*), dealer_id from dealers_makes group by dealers_makes.dealer_id order by count(*) desc limit 1

# 2021-06-29 16:05:40.042344
+SELECT v4.name, b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '6fd1791b-04f7-5884-9c65-1bf3999d8385') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:05:58.290262
+explain analyze SELECT v4.name, b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '6fd1791b-04f7-5884-9c65-1bf3999d8385') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:07:04.283799
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '6fd1791b-04f7-5884-9c65-1bf3999d8385') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:07:53.042641
+select vehicle_definitions.name, trims.name from trims inner join vehicle_definitions ON vehicle_definitions.trim_id = trims.id where trims.name = 'Willys'

# 2021-06-29 16:08:54.164539
+\d years

# 2021-06-29 16:09:16.563741
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = '6fd1791b-04f7-5884-9c65-1bf3999d8385') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL) and y5.value > 2020))

# 2021-06-29 16:09:54.949733
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL) and y5.value > 2020))

# 2021-06-29 16:10:48.365726
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" and y5.value > 2020 INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:12:14.057841
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" and y5.value > 2020 INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:12:37.616629
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" and y5.value > 2021 INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:12:57.043922
+SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" and y5.value > 2019 INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:13:16.596331
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL) and y5.value > 2020))

# 2021-06-29 16:13:39.289780
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:15:57.485725
+explain analyze format=json SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:16:45.456966
+explain analyze format json SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:17:05.426945
+explain format json analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:17:27.532094
+explain (format json( analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:17:36.669155
+explain (format json) analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:18:18.641672
+explain (format json, analyze) SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:20:26.298238
+\pager pbcopy

# 2021-06-29 16:20:28.558933
+explain (format json, analyze) SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:20:49.113463
+\x

# 2021-06-29 16:20:50.587523
+explain (format json, analyze) SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:23:41.961272
+\pager less

# 2021-06-29 16:23:43.244030
+explain (format json, analyze) SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:23:58.539058
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:24:02.178209
+\x

# 2021-06-29 16:24:03.482888
+explain analyze SELECT b6."name", i10."id", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))

# 2021-06-29 16:31:14.229471
+\d vehicle_definitions;

# 2021-06-29 16:31:56.619546
+\d incentives;

# 2021-06-29 16:36:21.174566
+select * from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join trims ON trims.model_year_id = model_years.id inner join models ON models.id = model_years.model_id inner join trims trims2 ON trims2.model_year_id = model_years.id inner join dealers_makes on dealers_makes.make_id = models.make_id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealer_addresses.zip_code = incentives.zip_code and dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-29 16:37:06.141846
+explain analyze select incentives.id, incentives.vehicle_definition_id from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join trims ON trims.model_year_id = model_years.id inner join models ON models.id = model_years.model_id inner join trims trims2 ON trims2.model_year_id = model_years.id inner join dealers_makes on dealers_makes.make_id = models.make_id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealer_addresses.zip_code = incentives.zip_code and dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-29 16:39:02.167331
+explain analyze SELECT b2."name", i7."id", i7."payload", i7."zip_code", i7."cash", i7."finance", i7."vehicle_definition_id", i7."inserted_at", i7."updated_at", m3."name", m3."slug", m4."name", m4."slug", t6."name", y5."name" FROM "listings" AS l0 INNER JOIN "inventory" AS i1 ON i1."id" = l0."inventory_id" INNER JOIN "body_styles" AS b2 ON b2."id" = i1."body_style_id" INNER JOIN "makes" AS m3 ON m3."id" = i1."make_id" INNER JOIN "models" AS m4 ON m4."id" = i1."model_id" INNER JOIN "years" AS y5 ON y5."id" = i1."year_id" INNER JOIN "trims" AS t6 ON t6."id" = i1."trim_id" INNER JOIN "listing_incentives" AS l8 ON l8."listing_id" = l0."id" INNER JOIN "incentives" AS i7 ON l8."incentive_id" = i7."id" WHERE ((i1."dealer_id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND (i1."used" = FALSE)) GROUP BY i7."id", m3."name", m3."slug", m4."name", m4."slug", y5."name", t6."name", b2."name"
+

# 2021-06-29 16:39:16.329149
+explain analyze SELECT b6."name", i10."id", i10."payload", i10."zip_code", i10."cash", i10."finance", i10."vehicle_definition_id", i10."inserted_at", i10."updated_at", m1."name", m1."slug", m2."name", m2."slug", t7."name", y5."name" FROM "dealers_makes" AS d0 INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" INNER JOIN "models" AS m2 ON m2."make_id" = m1."id" INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id" INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id" INNER JOIN "years" AS y5 ON y5."id" = m3."year_id" INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id" INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id" INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id" INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id" INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id" WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50') AND ((d9."zip_code" = i10."zip_code") OR (i10."zip_code" IS NULL)))
+

# 2021-06-30 08:53:14.767462
+\quit

# 2021-06-30 08:53:16.231230
+quit

# 2021-06-30 14:27:04.140909
+select * from dealers where customer_id = '5243651'

# 2021-06-30 14:27:10.281013
+select id from dealers where customer_id = '5243651'

# 2021-06-30 14:27:31.836342
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t 7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:27:53.864188
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:28:25.738529
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:30:26.462458
+
+SELECT i10."vehicle_definition_id",
+       i10."payload",
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:30:38.464632
+
+SELECT i10."vehicle_definition_id",
+       i10."payload"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:31:44.818658
+
+SELECT i10."payload"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL))) LIMIT 1

# 2021-06-30 14:31:46.653319
+\x

# 2021-06-30 14:31:48.069658
+
+SELECT i10."payload"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL))) LIMIT 1

# 2021-06-30 14:32:07.027545
+\pager pbcopy

# 2021-06-30 14:32:08.781053
+
+SELECT i10."payload"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL))) LIMIT 1

# 2021-06-30 14:41:20.265880
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:41:25.619199
+\x

# 2021-06-30 14:41:27.486339
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 14:49:57.030055
+\t

# 2021-06-30 14:50:01.160221
+\t off

# 2021-06-30 14:50:04.612650
+/t off

# 2021-06-30 14:50:06.007825
+/t

# 2021-06-30 14:50:30.251388
+\?

# 2021-06-30 14:52:03.887949
+select json_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:52:25.972432
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:52:32.432108
+\pager less

# 2021-06-30 14:52:33.532797
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:52:40.757354
+\x

# 2021-06-30 14:52:43.231693
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:53:52.530684
+\T

# 2021-06-30 14:54:11.227293
+\t plain

# 2021-06-30 14:54:15.221404
+\T plain

# 2021-06-30 14:54:17.652157
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:54:21.095669
+\x

# 2021-06-30 14:54:22.861180
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:54:35.685832
+\pager pbcopy

# 2021-06-30 14:54:36.766773
+select jsonb_pretty(payload) from incentives where id='a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 14:58:51.748921
+select jsonb_pretty(payload) from incentives where id='9cfebd16-71e9-48a1-b139-13aed2d63d39'

# 2021-06-30 15:02:05.544181
+\pager less

# 2021-06-30 15:02:13.453982
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:02:20.530754
+\T 

# 2021-06-30 15:02:28.067942
+\T moinmoin

# 2021-06-30 15:02:29.811254
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:02:35.368770
+\T

# 2021-06-30 15:02:39.093672
+\T grid

# 2021-06-30 15:02:40.445493
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:02:46.542826
+\T

# 2021-06-30 15:02:50.152279
+\T psql

# 2021-06-30 15:02:51.390269
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:04:36.433063
+select * from vehicle_definitions inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where incentives.id = 'a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 15:04:38.524552
+\x

# 2021-06-30 15:04:39.604657
+select * from vehicle_definitions inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where incentives.id = 'a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 15:05:49.873800
+select count(*) from vehicle_definitions inner join incentives ON incentives.vehicle_definition_id = vehicle_definitions.id where incentives.id = 'a77bcd23-26b3-4eeb-9045-5de3951c58a7'

# 2021-06-30 15:06:07.548720
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:06:09.449852
+\x

# 2021-06-30 15:06:10.787171
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:07:26.882502
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:08:12.232019
+
+explain analyze SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:08:43.305638
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:08:57.594331
+
+explain analyze SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:09:04.444670
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:09:35.111990
+\T plain

# 2021-06-30 15:09:44.979061
+\pager pbcopy

# 2021-06-30 15:10:16.064039
+select json_pretty(payload) from incentives where id='d8c2add6-71a3-4d89-9ba7-68923b98d70c '

# 2021-06-30 15:10:21.914232
+select jsonb_pretty(payload) from incentives where id='d8c2add6-71a3-4d89-9ba7-68923b98d70c'

# 2021-06-30 15:11:53.647112
+
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 ON t7."model_year_id" = m3."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:13:06.076024
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '5700a059-5e7e-5885-8c1a-ccb9cfb90443')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:14:12.733626
+select * from dealers where customer_id = '17455'

# 2021-06-30 15:14:17.853002
+\pager less

# 2021-06-30 15:14:18.718382
+select * from dealers where customer_id = '17455'

# 2021-06-30 15:14:27.133564
+select id from dealers where customer_id = '17455'

# 2021-06-30 15:14:42.530334
+SELECT b6."name",
+       i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+       t7."name",
+       y5."name"
+FROM "dealers_makes" AS d0
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "years" AS y5 ON y5."id" = m3."year_id"
+INNER JOIN "body_styles" AS b6 ON b6."id" = v4."body_style_id"
+INNER JOIN "trims" AS t7 on v4.trim_id = t7."id"
+INNER JOIN "dealers" AS d8 ON d8."id" = d0."dealer_id"
+INNER JOIN "dealer_addresses" AS d9 ON d9."dealer_id" = d8."id"
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+WHERE ((d8."id" = '8826dbbc-2c5b-5638-ab9e-db89a9676180')
+       AND ((d9."zip_code" = i10."zip_code")
+            OR (i10."zip_code" IS NULL)))

# 2021-06-30 15:18:19.404798
+select * from makes where name = 'Ford';

# 2021-06-30 15:19:43.511092
+SELECT i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug",
+FROM "incentives" AS d0
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+WHERE m2.make_id = 'd5d6b881-5b03-4b37-90a7-13c5d83b6d26' 

# 2021-06-30 15:19:56.033804
+SELECT i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug"
+FROM "incentives" AS i10
+INNER JOIN "incentives" AS i10 ON i10."vehicle_definition_id" = v4."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+WHERE m2.make_id = 'd5d6b881-5b03-4b37-90a7-13c5d83b6d26' 

# 2021-06-30 15:20:07.013666
+\x

# 2021-06-30 15:20:12.077770
+\pager less

# 2021-06-30 15:20:12.514857
+\x

# 2021-06-30 15:20:23.619051
+SELECT i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug"
+FROM "incentives" AS i10
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+WHERE m2.make_id = 'd5d6b881-5b03-4b37-90a7-13c5d83b6d26' 

# 2021-06-30 15:21:15.655451
+SELECT i10."id",
+       i10."zip_code",
+       i10."cash",
+       i10."finance",
+       i10."vehicle_definition_id",
+       i10."inserted_at",
+       i10."updated_at",
+       m1."name",
+       m1."slug",
+       m2."name",
+       m2."slug"
+FROM "incentives" AS i10
+INNER JOIN "model_years" AS m3 ON m3."model_id" = m2."id"
+INNER JOIN "vehicle_definitions" AS v4 ON v4."model_year_id" = m3."id"
+INNER JOIN "models" AS m2 ON m2."make_id" = m1."id"
+INNER JOIN "makes" AS m1 ON m1."id" = d0."make_id" 
+WHERE m2.make_id = 'd5d6b881-5b03-4b37-90a7-13c5d83b6d26' 

# 2021-06-30 15:21:26.282246
+select * from incentives inner join vehicle_definitions ON vehicle_definitions.id = incentives.vehicle_definition_id inner join model_years ON model_years.id = vehicle_definitions.model_year_id inner join trims ON trims.model_year_id = model_years.id inner join models ON models.id = model_years.model_id inner join trims trims2 ON trims2.model_year_id = model_years.id inner join dealers_makes on dealers_makes.make_id = models.make_id inner join dealers ON dealers.id = dealers_makes.dealer_id inner join dealer_addresses ON dealer_addresses.dealer_id = dealers.id where dealer_addresses.zip_code = incentives.zip_code and dealers_makes.dealer_id = 'c177dff5-ec37-5fb9-b5ee-a3779e49ac50'

# 2021-06-30 15:21:53.545069
+select count(*) from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford'

# 2021-06-30 15:22:15.984967
+select incentives.id from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford'

# 2021-06-30 15:22:46.263161
+select distinct on(incentives.id, makes.slug, models.slug) from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford'

# 2021-06-30 15:23:07.398747
+select distinct incentives.id, makes.slug, models.slug from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford'

# 2021-06-30 15:23:28.673290
+select distinct incentives.id, makes.slug, models.slug,incentives.zip_code from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford'

# 2021-06-30 15:24:19.254092
+select distinct incentives.id, makes.slug, models.slug,incentives.zip_code from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford' and incentives.zip_code = 55124

# 2021-06-30 15:24:24.902779
+select distinct incentives.id, makes.slug, models.slug,incentives.zip_code from incentives inner join vehicle_definitions as vd on incentives.vehicle_definition_id = vd.id inner join model_years as my on vd.model_year_id = my.id inner join models on my.model_id = models.id inner join makes on models.make_id = makes.id where makes.slug = 'ford' and incentives.zip_code = '55124'

# 2021-07-01 08:15:44.416392
+exit

# 2021-07-12 13:55:28.196969
+select * from listings;

# 2021-07-12 13:55:31.064772
+use engine_dev;

# 2021-07-12 13:55:32.516180
+select * from listings;

# 2021-07-12 13:55:35.103972
+\x

# 2021-07-12 13:55:35.969892
+select * from listings;

# 2021-07-12 14:01:05.233635
+select * from inventory;

# 2021-07-12 14:03:55.629058
+select * from inventory_displays;

# 2021-07-12 14:05:01.307839
+\q

# 2021-07-26 08:52:59.871106
+\c engine_dev

# 2021-07-26 08:53:02.018438
+select * from inventory_displays;

# 2021-07-26 08:53:10.152246
+select * from inventory_displays limit 1

# 2021-07-26 08:53:10.827065
+\x

# 2021-07-26 08:53:12.121069
+select * from inventory_displays limit 1

# 2021-07-26 12:01:26.834363
+\d inventory_displays

# 2021-07-26 12:01:29.455471
+\x

# 2021-07-26 12:01:30.467186
+\d inventory_displays

# 2021-07-26 12:02:37.608817
+select * from inventory_displays where image_urls = [];

# 2021-07-26 12:02:42.603246
+select * from inventory_displays where image_urls = array();

# 2021-07-26 12:03:10.268748
+select * from inventory_displays where image_urls = '{}'

# 2021-07-26 12:13:21.197538
+\d cdk_inventory_image_source_caches

# 2021-07-26 12:14:17.065848
+\x

# 2021-07-26 12:14:19.574811
+exit

# 2021-07-29 09:03:38.245608
+\c engine_dev

# 2021-07-29 09:03:48.774148
+select * from inventory_displays;

# 2021-07-29 09:03:50.518203
+\x

# 2021-07-29 09:03:51.418511
+select * from inventory_displays;

# 2021-07-29 09:37:25.542931
+select array_agg(provided_features) from inventory_displays;

# 2021-07-29 09:37:33.223490
+select concat(provided_features) from inventory_displays;

# 2021-07-29 09:37:41.606053
+select concat(provided_features) as varchar from inventory_displays;

# 2021-07-29 09:37:52.981756
+select provided_features from inventory_displays;

# 2021-07-29 09:38:22.196179
+select provided_features::text from inventory_displays;

# 2021-07-29 09:38:59.639370
+select array_to_string(provided_features, ' ', '') from inventory_displays;

# 2021-07-29 10:11:01.610661
+a

# 2021-07-29 10:11:03.937694
+quit

# 2021-07-29 11:04:34.927127
+\c engine_dev

# 2021-07-29 11:04:37.683255
+select * from oban_jobs;

# 2021-07-29 11:04:42.340469
+select * from oban_beats

# 2021-07-29 11:04:44.366514
+select * from oban_beats;

# 2021-08-04 09:58:25.064034
+\c engine_dev

# 2021-08-04 09:58:31.880542
+select * from model_years;

# 2021-08-04 09:58:35.907648
+\d model_years;

# 2021-08-04 10:02:23.566764
+\d trims

# 2021-08-04 10:06:00.842308
+select * from trims;

# 2021-08-04 10:07:22.429038
+select * from years;

# 2021-08-04 10:25:58.647353
+\d trims

# 2021-08-04 10:26:43.455884
+select * from trims;

# 2021-08-04 11:15:22.679887
+\q

# 2021-08-05 10:37:47.760029
+\c engine_dev

# 2021-08-05 10:37:53.475272
+select * from admin_adfs_groups

# 2021-08-09 11:02:29.167250
+\c engine_dev

# 2021-08-09 11:02:40.284773
+\d dealer_product_features

# 2021-08-09 11:40:25.803518
+\q

# 2021-08-10 08:32:36.807295
+SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 08:32:42.767465
+use engine_dev;

# 2021-08-10 08:32:44.602444
+SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 08:33:00.003401
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 08:33:15.943732
+exit

# 2021-08-10 08:45:34.735527
+SELECT d0."dealer_id"
+ FROM "dealer_product_features" AS d0
+ INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE
+ INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id"
+ INNER JOIN "products" AS p3 ON p3."id" = p2."product_id"
+ INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name'
+ INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name')
+ INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id"
+ INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id"
+ WHERE (z7."zip_code" = '60608')
+ AND (p3."code" IN ('HYPERDRIVE','PREMIER'))
+ AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 08:45:41.023935
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 08:55:03.417473
+select * from dealer_product_features inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products on products.id = product_features.product_id

# 2021-08-10 08:55:13.702378
+explain select * from dealer_product_features inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products on products.id = product_features.product_id

# 2021-08-10 08:55:45.832868
+select * from dealer_product_features limit 1;

# 2021-08-10 08:57:44.700384
+select json_array_elements((d0."feature_config" -> 'make_zones')::json) from dealer_product_features limit 100;

# 2021-08-10 08:57:51.240860
+select json_array_elements((d0."feature_config" -> 'make_zones')::json) from dealer_product_features as d0 limit 100;

# 2021-08-10 08:59:55.957323
+select d0."feature_config" -> 'make_zones' from dealer_product_features as d0 limit 100;

# 2021-08-10 09:00:03.855572
+select d0."feature_config" -> 'make_zones' as make_zones from dealer_product_features as d0 limit 100;

# 2021-08-10 09:02:33.471125
+select unnest((d0."feature_config" -> 'make_zones')::array) from dealer_product_features limit 100;

# 2021-08-10 09:02:42.032244
+select unnest((d0."feature_config" -> 'make_zones')) from dealer_product_features limit 100;

# 2021-08-10 09:02:47.319351
+select unnest((d0."feature_config" -> 'make_zones')) from dealer_product_features as d0 limit 100;

# 2021-08-10 09:03:22.294546
+select unnest(json_array_elements((d0."feature_config" -> 'make_zones')) from dealer_product_features as d0 limit 100;

# 2021-08-10 09:03:32.387947
+select unnest(json_array_elements((d0."feature_config" -> 'make_zones'))) from dealer_product_features as d0 limit 100;

# 2021-08-10 09:04:58.339326
+select jsonb_agg(make_zones) from dealer_product_features as d0, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones

# 2021-08-10 09:05:02.749325
+select jsonb_agg(make_zones) from dealer_product_features as d0, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones limit 100;

# 2021-08-10 09:05:35.811541
+explain analyze select jsonb_agg(make_zones) from dealer_product_features as d0, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones limit 100;

# 2021-08-10 09:07:19.439211
+select d0.feature_config -> 'make_zones' from dealer_product_features as d0;

# 2021-08-10 09:08:17.353704
+explain select d0.feature_config -> 'make_zones' from dealer_product_features as d0;

# 2021-08-10 09:10:44.563306
+select d0.feature_config -> 'make_zones' as make_zones from dealer_product_features as d0 where jsonb_array_length(make_zones) > 0;

# 2021-08-10 09:10:54.010897
+select d0.feature_config -> 'make_zones' as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 09:14:42.648160
+\x

# 2021-08-10 09:14:43.568505
+select d0.feature_config -> 'make_zones' as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 09:15:34.647012
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 09:15:36.703778
+\x

# 2021-08-10 09:15:37.571971
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 09:42:08.679187
+select * from zip_codes where zip_code = '60608'

# 2021-08-10 09:43:22.221847
+select d0.feature_config -> 'make_zones' as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 09:53:53.954176
+select * from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id where zip_code = '60608'

# 2021-08-10 09:53:56.043777
+\x

# 2021-08-10 09:53:57.024930
+select * from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id where zip_code = '60608'

# 2021-08-10 09:54:56.504876
+select * from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 09:55:24.338168
+select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 09:59:56.094963
+explain analyze select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 10:01:22.992854
+select d0.feature_config -> 'make_zones' as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:07:42.406138
+select jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:08:01.596426
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:09:51.788936
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:10:14.772959
+SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:10:20.948511
+;

# 2021-08-10 10:10:24.830247
+SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:11:05.421020
+explain analyze SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:11:07.074220
+\x

# 2021-08-10 10:11:08.334729
+explain analyze SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:12:55.548638
+select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 10:13:19.040905
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:13:40.369381
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones' -> zone_name) as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:13:48.671911
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones' -> 'zone_name') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:14:04.579873
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:15:21.463457
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0);

# 2021-08-10 10:15:36.549860
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones;

# 2021-08-10 10:15:48.756763
+explain analyze select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones;

# 2021-08-10 10:17:23.652065
+select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 10:17:34.812201
+explain analyze select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'a

# 2021-08-10 10:17:39.615688
+explain analyze select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 10:18:09.395733
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:18:45.441141
+select dealer_id, jsonb_agg(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:18:51.909714
+select jsonb_agg(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:19:25.390723
+select dealer_id, jsonb_agg(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:19:27.842848
+select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0;

# 2021-08-10 10:20:34.568045
+explain analyze select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones;

# 2021-08-10 10:20:40.598063
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones;

# 2021-08-10 10:20:56.955768
+select distinct on (make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones;

# 2021-08-10 10:22:53.170906
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:23:26.639428
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id where make_zones -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null

# 2021-08-10 10:24:06.228536
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:25:48.107122
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0 where make_zone -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:26:00.032109
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0 and make_zone -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:26:11.068909
+select make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0 and make_zones -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:27:40.093273
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id having zone_name not null and market_profile_name not null;

# 2021-08-10 10:28:23.281117
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id having zone_name is not null and market_profile_name is not null;

# 2021-08-10 10:28:51.181488
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id having make_zones -> 'zone_name' is not null and make_zones -> 'market_profile_name' is not null;

# 2021-08-10 10:29:52.528689
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name') as dealer_zones where zone_name is not null and market_profile_name is not null;

# 2021-08-10 10:30:03.184295
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones where zone_name is not null and market_profile_name is not null;

# 2021-08-10 10:30:22.319363
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones where zone_name != "null" and market_profile_name is not null;

# 2021-08-10 10:30:30.813345
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones where zone_name != 'null' and market_profile_name is not null;

# 2021-08-10 10:31:27.852103
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where zone_name != 'null' and market_profile_name != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:31:51.601110
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:32:13.123435
+explain analyze select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:33:33.011314
+SELECT d0."dealer_id", p2."code" 
+FROM "dealer_product_features" AS d0 
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" 
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" 
+    INNER JOIN "markets" AS m3 ON m3."profile_name" = d0."feature_config" -> 'make_zones' -> 0 ->> 'market_profile_name' 
+    INNER JOIN "zones" AS z4 ON (z4."market_id" = m3."id") AND (z4."name" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name') 
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" 
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" 
+WHERE (z6."zip_code" = '60608') AND (p2."code" IN ('HYPERDRIVE','PREMIER')) AND (upper(d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_description') = ANY('{"HONDA"}')) 
+ORDER BY d0."inserted_at" DESC

# 2021-08-10 10:33:51.472112
+explain analyze SELECT d0."dealer_id", p2."code" 
+FROM "dealer_product_features" AS d0 
+    INNER JOIN "product_features" AS p1 ON p1."id" = d0."product_feature_id" 
+    INNER JOIN "products" AS p2 ON p2."id" = p1."product_id" 
+    INNER JOIN "markets" AS m3 ON m3."profile_name" = d0."feature_config" -> 'make_zones' -> 0 ->> 'market_profile_name' 
+    INNER JOIN "zones" AS z4 ON (z4."market_id" = m3."id") AND (z4."name" = d0."feature_config" -> 'make_zones' -> 0 ->> 'zone_name') 
+    INNER JOIN "zips_zones" AS z5 ON z5."zone_id" = z4."id" 
+    INNER JOIN "zip_codes" AS z6 ON z6."id" = z5."zip_code_id" 
+WHERE (z6."zip_code" = '60608') AND (p2."code" IN ('HYPERDRIVE','PREMIER')) AND (upper(d0."feature_config" -> 'make_zones' -> 0 ->> 'vehicle_make_description') = ANY('{"HONDA"}')) 
+ORDER BY d0."inserted_at" DESC

# 2021-08-10 10:34:14.400088
+SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:34:23.715295
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:36:23.126523
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:36:35.433570
+explain analyze select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id^

# 2021-08-10 10:36:39.921403
+explain analyze select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:38:44.832479
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE', 'PREMIER')

# 2021-08-10 10:39:01.651389
+select dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE', 'PREMIER')

# 2021-08-10 10:39:10.696458
+select dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE', 'PREMIER')

# 2021-08-10 10:39:46.954340
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE', 'PREMIER')

# 2021-08-10 10:42:05.107381
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id^

# 2021-08-10 10:42:10.472362
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', dealer_id

# 2021-08-10 10:42:28.914800
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:43:31.057810
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:43:56.156676
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:44:27.207071
+explain analyze select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:46:38.058396
+EXPLAIN ANALYZE SELECT d0."dealer_id"
+FROM "dealer_product_features" AS d0 
+INNER JOIN LATERAL json_array_elements((d0."feature_config" -> 'make_zones')::json) AS f1 ON TRUE 
+INNER JOIN "product_features" AS p2 ON p2."id" = d0."product_feature_id" 
+INNER JOIN "products" AS p3 ON p3."id" = p2."product_id" 
+INNER JOIN "markets" AS m4 ON m4."profile_name" = f1 ->> 'market_profile_name' 
+INNER JOIN "zones" AS z5 ON (z5."market_id" = m4."id") AND (z5."name" = f1 ->> 'zone_name') 
+INNER JOIN "zips_zones" AS z6 ON z6."zone_id" = z5."id" 
+INNER JOIN "zip_codes" AS z7 ON z7."id" = z6."zip_code_id" 
+WHERE (z7."zip_code" = '60608') 
+AND (p3."code" IN ('HYPERDRIVE','PREMIER')) 
+AND (upper(f1 ->> 'vehicle_make_description') = ANY('{"HONDA"}'))

# 2021-08-10 10:47:14.768294
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:47:36.232955
+explain analyze select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:49:55.725083
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:50:25.516865
+select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id

# 2021-08-10 10:56:32.010177
+select zone_name, market_profile_name, dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 10:56:55.600818
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.dealer_id, products.code from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 10:58:06.162341
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 10:58:16.951896
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') limit 1;

# 2021-08-10 10:58:18.278969
+\x

# 2021-08-10 10:58:19.234898
+select * from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as market_profile_name, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') limit 1;

# 2021-08-10 10:59:19.974684
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') limit 1;

# 2021-08-10 10:59:25.948755
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER');

# 2021-08-10 10:59:28.401290
+\x

# 2021-08-10 10:59:29.380155
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER');

# 2021-08-10 11:00:07.630152
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER');

# 2021-08-10 11:01:07.639565
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') where zone_name = "arkansas" and market_profile_name = "national" and vehicle_make_description = "BUICK";

# 2021-08-10 11:01:18.799249
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and zone_name = "arkansas" and market_profile_name = "national" and vehicle_make_description = "BUICK";

# 2021-08-10 11:01:36.102384
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and zone_name = 'arkansas' and market_profile_name = 'national' and vehicle_make_description = 'BUICK';

# 2021-08-10 11:01:58.513553
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and dealer_zones.zone_name = 'arkansas' and dealer_zones.market_profile_name = 'national' and dealer_zones.vehicle_make_description = 'BUICK';

# 2021-08-10 11:02:44.030864
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and dealer_zones.zone_name::text = 'arkansas' and dealer_zones.market_profile_name = 'national' and dealer_zones.vehicle_make_description = 'BUICK';

# 2021-08-10 11:02:51.152170
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and dealer_zones.zone_name::text = 'arkansas' and dealer_zones.market_profile_name::text = 'national' and dealer_zones.vehicle_make_description = 'BUICK';

# 2021-08-10 11:02:55.100553
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and dealer_zones.zone_name::text = 'arkansas' and dealer_zones.market_profile_name::text = 'national' and dealer_zones.vehicle_make_description::text = 'BUICK';

# 2021-08-10 11:03:21.843116
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 11:04:48.604601
+select zones.name, markets.profile_name from zip_codes inner join zips_zones ON zips_zones.zip_code_id = zip_codes.id inner join zones ON zones
+.id = zips_zones.zone_id inner join markets ON markets.id = zones.market_id where zip_code = '60608'

# 2021-08-10 11:05:00.720808
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 11:05:16.020933
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') where zone_name = 'southwest';

# 2021-08-10 11:05:21.792142
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and zone_name = 'southwest';

# 2021-08-10 11:05:29.926165
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER') and zone_name::text = 'southwest';

# 2021-08-10 11:05:43.044412
+select dealer_zones.zone_name, dealer_zones.market_profile_name, dealer_zones.vehicle_make_description, products.code, dealer_zones.dealer_id from (select make_zones -> 'zone_name' as zone_name, make_zones -> 'market_profile_name' as market_profile_name, make_zones -> 'vehicle_make_description' as vehicle_make_description, dealer_id from (select dealer_id, jsonb_array_elements(d0.feature_config -> 'make_zones') as make_zones from dealer_product_features as d0 where jsonb_array_length(d0.feature_config -> 'make_zones') > 0) as zones where make_zones -> 'zone_name' != 'null' and make_zones -> 'market_profile_name' != 'null' and make_zones -> 'vehicle_make_description' != 'null' group by make_zones -> 'zone_name', make_zones -> 'market_profile_name', make_zones -> 'vehicle_make_description', dealer_id) as dealer_zones inner join dealer_product_features on dealer_zones.dealer_id = dealer_product_features.dealer_id inner join product_features ON product_features.id = dealer_product_features.product_feature_id inner join products ON products.id = product_features.product_id where products.code in ('HYPERDRIVE','PREMIER')

# 2021-08-10 12:39:41.834956
+exit

# 2021-08-11 10:25:16.852830
+\c engine_dev

# 2021-08-11 10:25:21.813345
+select * from inventory_displays

# 2021-08-11 10:25:31.556748
+\x

# 2021-08-11 10:25:33.896375
+select * from inventory_displays

# 2021-08-11 11:45:33.082382
+\q

# 2021-08-11 12:55:22.131972
+\c engine_dev

# 2021-08-11 12:55:25.280729
+select * from inventory_displays

# 2021-08-11 12:55:26.921779
+\q

# 2021-08-12 11:40:00.324983
+\c engine_dev

# 2021-08-12 11:40:04.205268
+select * from fun_with_flags_toggles

# 2021-08-12 11:49:44.029483
+\q

# 2021-08-12 12:29:57.580502
+\c engine_test

# 2021-08-12 12:30:01.337867
+select * from fun_with_flags_toggles

# 2021-08-12 14:31:18.112612
+\c engine_dev

# 2021-08-12 14:31:24.917997
+select * from admin_roles;

# 2021-08-12 14:31:58.059774
+select * from admin_adfs_groups;

# 2021-08-12 14:32:02.210650
+select * from admins;

# 2021-08-12 14:32:06.802951
+\d

# 2021-08-12 14:32:59.060409
+\c data_warehouse_dev

# 2021-08-12 14:33:01.060279
+\d

# 2021-08-12 14:33:08.395872
+\db

# 2021-08-12 14:33:17.374402
+\?

# 2021-08-12 14:33:56.277127
+\c engine_dev

# 2021-08-12 14:34:05.433671
+select * from dealer_product_features;

# 2021-08-12 14:34:13.107874
+\d dealer_product_features

# 2021-08-12 14:34:19.002161
+select * from product_features;

# 2021-08-12 14:34:24.389456
+\d product_features;

# 2021-08-12 14:34:31.060715
+select * from features;

# 2021-08-13 07:25:23.666789
+\d

# 2021-08-13 07:25:54.455232
+select * from roles;

# 2021-08-13 07:39:30.406101
+select * from fun_with_flags_toggles

# 2021-08-30 09:52:40.192428
+select * from fun_with_flags_toggles;

# 2021-09-01 11:28:29.562625
+\c engine_dev

# 2021-09-01 11:28:32.677659
+\dt

# 2021-09-01 11:29:06.709830
+drop database engine_dev

# 2021-09-01 11:29:15.035437
+use postgres

# 2021-09-01 11:29:18.296874
+drop database engine_dev

# 2021-09-01 11:29:24.743141
+drop database engine_test

# 2021-09-01 11:29:29.097187
+exit

# 2021-09-01 11:34:12.379533
+use engine_dev;

# 2021-09-01 11:34:26.329041
+exit

# 2021-09-01 11:35:16.066336
+use engine_dev;

# 2021-09-01 11:35:19.689181
+\d feature_flags

# 2021-09-01 11:35:31.838641
+\q

# 2021-09-02 08:39:10.154897
+use engine_dev;

# 2021-09-02 08:39:19.682311
+select * from feature_flags;

# 2021-09-02 08:39:22.832494
+exit

# 2021-09-02 10:07:22.823512
+use engine_dev;

# 2021-09-02 10:07:27.614838
+select * from body_styles'

# 2021-09-02 10:07:28.964862
+select * from body_styles;

# 2021-09-02 10:07:34.083765
+exit

# 2021-09-02 10:13:25.877240
+select * from body_styles limit 100;

# 2021-09-02 10:13:36.720661
+select * from body_styles;

# 2021-09-02 10:16:10.710033
+\q

# 2021-09-02 14:17:53.047106
+use engine_dev;

# 2021-09-02 14:17:56.060861
+select * from body_styles;

# 2021-09-02 14:18:02.451022
+\d body_styles

# 2021-09-02 14:25:13.445163
+\q

# 2021-09-02 14:26:48.565490
+use engine_test

# 2021-09-02 14:26:53.718133
+select * from oban_jobs;

# 2021-09-02 14:27:04.091170
+select * from oban_beats

# 2021-09-02 14:27:06.126592
+\q

# 2021-09-09 10:39:30.900894
+use engine_dev

# 2021-09-09 10:39:34.916516
+select * from brightcove_video;

# 2021-09-09 10:41:11.870375
+exit

# 2021-09-09 10:44:27.590464
+select * from brightcove_video limit 10;

# 2021-09-09 10:44:36.140886
+\d

# 2021-09-09 10:44:45.985480
+select * from brightcove_video;

# 2021-09-09 10:44:54.049624
+\q

# 2021-09-09 14:21:27.617560
+select * from brightcove_video;

# 2021-09-09 14:21:30.225771
+use engine_dev

# 2021-09-09 14:21:31.017721
+select * from brightcove_video;

# 2021-09-09 14:25:21.630703
+\q
